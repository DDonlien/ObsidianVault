
**v0.0.2**

**v0.0.1 - 收尾**

\1. **收尾工作**

- ~~调整中文和英文logo~~
- ~~调整美宣图（附上logo）@alice~~
- 制作游戏图标（桌面图标）@mika
- ~~制作游戏试玩视频~~
- ~~发布到机核、小红书、B站~~
- 宣传，准备BOOOM JAM拉票
- ~~整理0.0.1的测试问题和后续计划~~
- 重新整理BP和Deck
- ~~考虑到0.0.1的情况，等0.0.2再share给发行商和海外机构~~

\2. **休息**

- 好好休息一下
- 消化一下我们复盘的内容
- 恢复动力和灵感

\3. **复盘**

3.1 **总结**

- 关卡编辑、地编工作流有待优化
- 战争迷雾
- 需要进一步细化需求
- 门的缺失
- 近战攻击的手感很怪
- 武器的前中后摇需要单独配置
- 远程攻击
- 移动射击有些过强
- 我们也没办法反制敌人（敌人没有提示）
- UI设计过程没办法看到场景，有点缺少团队交互
- 主要还是实际的关卡和场景和UI系统实装太晚了
- 需要额外一位UI
- 监视页面要做掉 -> 做了UI没有实装
- 用实际的3D做演示？
- 动画效果做一部分
- AI
- 义体
- 技能
- 需要融合打印，但不需要基于tagging的掉落
- 信用点
- 动态的弹孔特效？or 烟雾VFX？
- VFX和动画缺失
- Shader
- 截图给到arthur，再平面做处理
- Lumen可能存在性能问题
- 整体配表功能
- Property 
- Wwise集成
- 谁来负责content往ue的导入？
- wwise怎么做版本管理？
- wwise的插件要纳入ue的版本管理
- wwise的项目工程也要纳入版本管理？
- 本地化系统 -> string table引用？@Decay
- formate最好用name argument不要用顺序？

3.2 **Issue**

[问题清单](../市场运营/宣发规划/玩家问卷/问题清单.md)

3.3 **Good**

[优点清单](https://dikpa4hrtn9.feishu.cn/wiki/Y9wHwjdIiiX10SkGGOoc6XMsnUg?fromScene=spaceOverview&table=tblIrZ85uhPx8LiT&view=vewUN3XmLw)

- 美术素材
- 头像插画
- 美宣图
- UI
- Logo
- BGM

**v0.0.2 - 计划**

```<p>- **版本状态：**开发中</p><p>- **版本定位：**Demo WIP</p><p>- **包含内容：**</p><p>- 玩法：</p><p>- **开发目标：**</p><p>- 完成v0.0.1未能完成的既定功能</p><p>- 调整v0.0.1已知不够好的部份</p><p>- v0.0.1-Patch1 -> ⏰2024-08-30 23:59</p><p>- Bug fix P0 - 在31号之前更新一个fix版本投稿TIG比赛@Decay</p><p>- DDL -> ⏰2024-10-31 23:59</p><p>- 之前0.0.1版本约耗时2个月（1.5个月）开发节奏和沟通节奏都比较稳定</p><p>- **版本用途：**</p><p>- ~~需要有个bug fix版本（v0.0.1-patch1）用于8月底的TIG投稿~~</p><p>- ~~III和IGA主办的独立游戏比赛~~</p><p>- ~~包含v0.0.1所有P0 bug fix~~</p><p>- 用于内部验证核心机制</p><p>- 用于初步的发行商、投资方接触</p><p>- 用于更广泛的玩家接触、社交媒体内容分享</p><p>- 可能的话，用于参加线下核聚变BOOOM JAM展出活动</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/OAsXdbZO3o6PGfxY7bjcYap0ndc#YSuDdT3hwsht7KbG987c9oVznud></p>```
\1. **人员计划**

- 调整？
- 新增？
- 希望追加一位运营人员，又或者由我这边兼任直到有发行商？-> 可能先随缘找
- 希望追加一位UI
- 希望追加一位建模师，负责人物模型

**项目管理**

\1. **决策**

```<p>1. Q：什么时候做联机功能</p><p>a. **A：推迟到最早EA版本上线后**</p><p>i. 经过JAM阶段，我们目前极限产能很明显就是单机版本2个月出1个有价值的迭代版本，如果考虑到后续商品级别的内容产出，这个间隔可能更久</p><p>ii. 目前观察，同步做联机功能的耗时会翻倍</p><p>iii. 为了保证尽快让项目步入正轨（尽早把核心卖点中的大部分呈现给玩家和发行商、投资人）联机功能我们会单独划一块时间，在EA版本上线后制作，以防在现阶段投入太多精力，导致项目前期等待周期过长，甚至胎死腹中。</p><p>1. 这一方案也被星露谷物语等P2P联机佳作采用过，有成功实践</p><p>iv. EA版本上线后的这个时间点，也是考虑到市场和开发管理平衡（尽快在正式版之前吸引喜欢联机协作的玩家）制定的</p><p>v. 我们**一定不会放弃**联机功能，它对于游戏长期生命力的帮助依旧大于投入，并且联机肉鸽是个相对更容易突出的赛道，但确实需要调整项目计划以确保更好的落地</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/AAwhdTB3PorPqGxHHgYcKHM2nRe#IDQDdv9QzsDZEYbtPG0cLecOnMh></p>```
\2. **BP & Pitch Deck**

- 更新一个更精简的版本@Taobe⏰2024-09-01 23:59
- 更新0.0.2完整规划@Taobe@Cade⏰2024-09-01 23:59

\3. **回复获得Wwise独立工作室授权**

- ~~准备BP和介绍@Taobe⏰2024-08-26 23:59~~

**玩法**

\1. **操控**

1.1 **普通攻击**

1.1.1 **子弹生成**

v0.0.2 - 需要更好的障碍物解决方案

方哥看看是直接用原定计划，还是用可能的方案

```<p>- 可能的方案@Decay</p><p>- 玩家按下鼠标左键时，应该先从指针位置cast一个ray，看能触发到哪个对象</p><p>- 从反馈对象的胶囊体中央反一个位置，和玩家的子弹生成位置连线</p><p>- 用连线vector作为子弹生成的vector</p><p>- 子弹散布在此基础之上发生</p><p>- 这样所有障碍物无需专门设计遮挡，只需如实设计体积即可</p><p>- v0.0.2方案 -> DONE</p><p>- 所有子弹都应该在90cm高的位置生成，所以可以正常击中蹲伏玩家</p><p>- 视觉上，这会导致子弹生成位置与武器错位</p><p>- 解决方案：生成2套子弹，一个跟随枪口生成niagra没有伤害，一个跟随90cm高度生成隐身但有伤害</p><p>- 该方案在v0.0.1验证似乎会影响手感，但没有和新的伤害机制结合尝试，v0.0.2再次尝试@Decay</p><p>- 该方案面对站立障碍物（多高度障碍物）会有些问题，也无法处理蹲伏玩家射击</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TdkxdEEtjohnt6xRihVcvTCMnYd#E31ldvMUfsreZqb9XoDcKwCdnop></p>```
1.1.2 **攻击机制**

- ~~调整远程攻击逻辑@Decay⏰2024-09-13 08:00~~

```<p>- **v0.0.1 Issue**</p><p>- 近战攻击现在体验比较差，主要来源于2个方面：</p><p>- 攻击同时可以移动，所以所有动作都显得非常飘</p><p>- 攻击的时间间隔明显不对，我们设计的间隔被均分到了攻击的所有步骤</p><p>- **v0.0.2 Action @Decay** </p><p>- 一次攻击（近战/远程）应该由以下4个时间part构成</p><p>- 前摇</p><p>- 造成伤害</p><p>- 后摇</p><p>- 间隔</p><p>- 近战攻击在{前摇 - 造成伤害 - 后摇}期间无法移动</p><p>- 关于相对合理的近战攻击频率，参考ow解包</p><p>- https://overwatch.fandom.com/wiki/Melee</p><p>- 远程攻击如果想要有手感，应该也要有以上4个步骤，只是可能体验起来不明显 @Decay@Cade</p><p>- 前摇：大部分都应该为0，但也许有特殊情况？</p><p>- 造成伤害：</p><p>- 变成生成子弹</p><p>- 大部份为即时，duration = 0</p><p>- 但这里也许会由于存在蓄力武器、激光武器、滋崩武器带来不同的问题</p><p>- 后摇：~~大部分都应该为0，但火箭筒这种可能会有很明显的后摇？~~</p><p>- 必须有后摇，因为其实用后摇而非间隔限制自动武器更为合理</p><p>- 间隔：大部份情况 = 0</p><p>- 间隔在我们的系统里，其实就是一个没有惩罚的后摇？</p><p>- 有个个问题：</p><p>- 照理说玩家无法在后摇里做任何其他动作，但间隔可以</p><p>- 与此同时，我又不希望玩家用半自动武器时，出现频繁的加速减速</p><p>- 但对于有超大间隔的武器（比如迫击炮）我又不希望在间隔期间全程减速</p><p>- 暂时的做法是先把大部份武器间隔设置为0，少数超慢速武器（狙击步枪、火箭筒）设置间隔。</p><p>- 远程攻击在{前摇 - 造成伤害 - 后摇}期间移动速度降低</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TdkxdEEtjohnt6xRihVcvTCMnYd#KIhZdq8bVseQFmbbcVMcuf4rnCg></p>```


```<p>- 远程攻击：动作时降低移动速度（孤立数值）</p><p>- 射击动作需要有一个loop，步枪case：</p><p>- 前摇：0.01</p><p>- 射击事件：瞬间，大部份 = 0</p><p>- 后摇：0.02</p><p>- 攻击间隔 = 0.01，自动武器一般=0</p><p>- 攻击耗时：前摇+事件+后摇+间隔 = 0.0.4</p><p>- 减速buff由前摇事件触发，有孤立的持续时间</p><p>- 减速时长 = 前摇 + 触发 + 后摇</p><p>- 一般来说，自动武器的攻击间隔 = 0</p><p>- 减速期间可以旋转，旋转速率不受影响</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/F4cJdlWhvoMrIJxWcFycLD1SnAc#KVKdd4vLksoENVb0Tfqcfh8Unvh></p>```
- 一个远程攻击的手感问题：

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.001.jpeg)

```<p>1. Q：攻击时是否可以移动？</p><p>a. **v0.0.2**：尝试方案2，并以开关方式实现2、3切换来验证。现在行的手感很奇怪</p><p>b. **v0.0.1**：方案1</p><p>c. 方案1：可以，参考挺进地牢</p><p>d. 方案2：近战不行，远程可以，参考上行战场</p><p>e. 方案3：完全不行，参考哈迪斯、怪物猎人、黑魂</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/AAwhdTB3PorPqGxHHgYcKHM2nRe#Sj8od1f1css2yTbOevmcEg8zn4e></p>```
- ~~调整近战攻击逻辑@Decay⏰2024-09-16 08:00~~

```<p>- 近战攻击：不能移动，不能旋转</p><p>- 近战出招：类似暗黑的攻击逻辑，没有连招系统</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/F4cJdlWhvoMrIJxWcFycLD1SnAc#R7Yzd4q1Vsk4xSbAC1gcfwOCnNb></p>```
1.1.3 **冲击力&硬直**

- 0.0.2做策划规划，0.0.3实现程序
- ~~撰写冲击力+硬直系统逻辑@苏祺恒⏰2024-09-13 08:00~~

1.2 **蹲伏**

- **v0.0.2：**需要标准化障碍物

```<p>- 蹲伏的单位可以通过掩体规避一些远程攻击</p><p>- 玩家的身高（胶囊体）是180cm，蹲伏高度为90cm（{50%}）</p><p>- btw这里我在现实生活实测了一下，差不多，但真的蹲伏到90cm比较难走路</p><p>- 游戏中的掩体（阻拦子弹）有4种典型高度，分别为：</p><p>- Type1：<=85cm，阻拦移动，无法作为掩体</p><p>- Type2：90~145cm，阻拦移动，蹲伏掩体，无法作为站立掩体</p><p>- 150~180cm，不出现，以避免“怎么打不到头？？”的问题</p><p>- Type3：180~250cm，阻拦移动，站立掩体，顶部可视</p><p>- Type4：>300cm（或者其他墙壁高度），阻拦移动，站立掩体，和墙壁同高度，顶部黑色</p><p>- 该方案会有一个问题</p><p>- 所有>90cm的障碍物都会成为蹲伏+站立掩体，不符合直觉</p><p>- 更理想的方案：</p><p>- 子弹从枪口高度（但不是枪口，以避免平衡性问题）150cm生成</p><p>- 如果玩家蹲伏，子弹从70cm位置生成</p><p>- 当玩家尝试攻击没有掩体的蹲伏对象时，应该能正确击中</p><p>- How @Decay@Cade我现在提的方案详见[v0.0.2](https://dikpa4hrtn9.feishu.cn/wiki/SkO6wTCmSiq97YkIjLmcW8OCnJb#Ho6OdZ12toJijJxulTCcWCfdnch)</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/SFgNd2a5DoL3HTxAjzac7sS2ngd#JhvPdXGolsD9sKbbYHXcz7fnn3e></p>```
1.3 **翻滚**

**翻滚- Todo**

```<p>- ~~翻滚时没有和角色的碰撞体积@Decay⏰2024-11-09 08:00~~</p><p>- 此任务已被删除</p><p>- 平地不太准确，类似于武器打印机，有一个一点点的凸台就会触发。感觉这个自动蹲伏需要更紧的判断依据</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/F4cJdlWhvoMrIJxWcFycLD1SnAc#O0NTdmf3jsqPMsbLPLHcp2jundb></p>```
\2. **镜头**

2.1 **视野遮挡**

```<p>- **方案1 - v0.0.2 @Decay**</p><p>- 参考清零计划</p><p>- 以玩家为中心，镂空{300cm}半径、下45°的两条墙壁</p><p>- 玩家视野内的敌人，延时描边呈现</p><p>- 延时和描边效果参考下图的《上行战场》</p><p>- 玩家视野现在以锥形范围为准，如果战争迷雾修改，则单独设计角度</p><p>- 不镂空Type 1、2的遮挡物，镂空Type 3、4的</p><p>- 遮挡物Type详见{蹲伏}篇章：[玩法](https://dikpa4hrtn9.feishu.cn/wiki/W6WSwDwfriKFu2knYnFcLsYpn7g#KfMgdea0loVHYlxFOJncqB6fn5b)</p><p>- 镂空部分的透明度可调，并且在边缘会渐变过渡</p><p>- 问题1：</p><p>- 我们目前已经实现墙体透视，但遇到了如下问题</p><p>- 可以看到图1中，玩家从1面墙移动到另1面墙时，另一面墙需要等到完全和玩家重叠才会透视，导致透视显示不自然</p><p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.002.png)</p><p>- 这个问题的成因是：如下图所示的2个墙体侧面和人物角色的位置关系是一样的，因此程序无法判断提前透视图1，而不透视图2</p><p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.003.png)</p><p>- 但很显然，图1的墙壁侧面应该被隐藏，事实上，它应该一开始就处于“可被透视”状态（而非等到玩家和它完全重叠后才切换状态</p><p>- 如何判断这两类墙壁的差异，并实现连贯透视图1中墙壁的情况呢？</p><p>- 问题2：如上图可以看到，墙壁会在被透视的部份留下阴影，导致透视圈看似被切割了</p><p>- **方案2 -> 0.0.2不做**</p><p>- 房间全部做半高墙，进入后隐藏高半部分，参考暗黑破坏神</p><p>- **方案3 -> 0.0.2不做**</p><p>- 旋转镜头，参考VRising</p><p>- **参考：清零计划2**</p><p>- 在屏幕空间有一个透视功能，会穿透所有阻挡玩家可见性的障碍物</p><p>- 敌人则是描边呈现</p>```

|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.004.png)</p><p>图里其实有座山挡住了玩家，但被透视了，看下半部分的切边</p>|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.005.png)</p><p>如图左侧房子后的敌人</p>|
| :-: | :-: |

```<p></p><p>- **参考：上行战场**</p><p>- 如果被遮挡，并且在视野范围内，开始计时</p>```

|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.006.png)</p><p>刚被遮挡的玩家并不会被描边</p>|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.007.png)</p><p>一定时间后，玩家的描边透视出现</p>|
| :-: | :-: |

```<p></p><p>- 对两者都采用了延迟描边的做法</p>```

|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.008.png)</p><p>此时外墙后有2个敌人，但只有1个描了边</p><p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.008.png)</p><p>敌人移出遮挡时，会按镜头空间消除描边</p>|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.008.png)</p><p>0.x秒后，另一个敌人也描上边了</p>|
| :-: | :-: |

```<p></p><p>- 上行战场对建筑物同时使用了类似暗黑破坏神/VRising的做法，但我们应该用不上，只是参考墙壁黑边</p>```

|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.008.png)</p><p>玩家距离建筑远时，会显示屋顶</p>|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.008.png)</p><p>靠近时则会透视天花板，但这里墙壁还是做了黑边</p>|
| :-: | :-: |

```<p></p><p>- **v0.0.1 Issue：**</p><p>- 角色会被位于下45°的两条墙壁遮挡</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TdkxdEEtjohnt6xRihVcvTCMnYd#WfXedEGUjsdZTWbx699clvdEnt4></p>```
2.2 **战争迷雾**

```<p>- **v0.0.2**</p><p>- 战争迷雾增加一个死区，玩家鼠标/角色在该定义角度/区域内移动时，战争迷雾不移动 -> done</p><p>- 应该类似于推箱子的效果，如果接触到死区边缘，从边缘开始平滑移动，而非自动置中</p><p>- 战争迷雾的显示和隐藏（亮层，灰色层的切换）应该有渐变过渡效果而非实时</p><p>- 也即，当一个新的grid从黑切换到灰、灰切换到亮，应该有个渐变效果 -> todo @Decay</p><p>- 该过度的**宽度**和**渐变时间**应该可调，考虑到使用适应性，以亮层向外平移一定距离即可，该距离应该可调 -> done</p><p>- 视野区域在FOV角度以外，应当有N距离，渐变到灰色迷雾区域</p><p>- 灰色迷雾到黑色迷雾区域的过度同理</p><p>- N可以=0，不应该导致BUG；两处过度（视野到灰色、灰色到黑色）应该可以分别设置N</p><p>- 如果遇到全新的空间（视野区域和黑色迷雾区域直接连接），则取2个N小的那个</p><p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.009.png)</p><p>如上图，红色为视野，黄色和红色之间的距离为渐变距离，小兵带来的视野请无视</p><p>- 实现代码 @Taobe</p><p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.010.png)</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TdkxdEEtjohnt6xRihVcvTCMnYd#ERxRdWH2YsLQy6bowAzcQKkkned></p>```
\3. **AI**

3.1 **敌人掉落**

- ~~敌人掉落物应该跟随敌人BP走，在每个BP内手工配表@Decay⏰2024-12-07 08:00~~
- 表结构应该如下：
- 掉落物
- 掉落概率（百分比，1~100）
- 掉落量下限
- 掉落量上限
- 每个凋落物单独计算掉落概率，因此掉落概率总和可以<或>100%
- 如果随机确认掉落，则在掉落量下限和上限之间随机一个数值生成掉落物

3.2 **AI - Todo**

- ~~找一个合适的俯视角敌人案例@龚政涛⏰2024-09-05 08:00~~
- ~~准备AI事件逻辑@龚政涛@苏祺恒⏰2024-09-03 08:00~~
- ~~撰写AI近战逻辑@龚政涛⏰2024-09-06 08:00~~
- ~~撰写AI远程逻辑@龚政涛⏰2024-09-04 08:00~~
- ~~AI在瞄准和移动状态间切换@李少秋⏰2024-11-11 08:00~~
- ~~远程：AI基于和玩家的距离决定移动情况（EQS）@李少秋⏰2024-11-12 08:00~~
- ~~远程：AI在瞄准攻击前判断障碍物决定是否攻击@Decay@龚政涛~~

|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.011.jpeg)</p><p><br>同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TdkxdEEtjohnt6xRihVcvTCMnYd#QlYxdpXDOsbDbxbQPCVc30ErnQK></p>|
| :-: |
- ~~撰写玩家近战攻击逻辑@龚政涛@苏祺恒⏰2024-09-03 08:00~~
- ~~敌人死亡后尸体不消失@Decay@李少秋⏰2024-09-24 08:00~~
- 目前的方案是循环播放死亡动画最后一帧，视觉上没有问题，程序上需要进一步优化？
- ~~死亡后的敌人不应该渲染透视雷达效果@Decay~~
- 此任务已被删除

3.3 **响应事件**

```<p>- **听觉**</p><p>- 武器攻击、移动（跑步和走路）、开门会生成不同强度的“声音”</p><p>- ~~问题：在默认情况下，听觉事件是如何实现衰减的？@李少秋~~</p><p>- ~~BTW，我认为衰减次数少的那种比较合理~~</p><p>- AI拥有2个听觉相关系数：听觉范围HearingRange，超过该范围的“声音”无法触发听觉事件；</p><p>- AI接受听觉（声音）需要满足2个条件（与门）</p><p>- Loudness x HearingRange x DecayRatio >= Distance</p><p>- Loudness是发声源属性</p><p>- HearingRange是AI属性</p><p>- DecayRatio是阻挡物属性</p><p>- v0.0.2目前应该是系统属性，也即全局的mesh共享一个 = 0.5</p><p>- Distance如下图实时计算</p><p>- Loudness x SpreadRange x DecayRatio >= Distance</p><p>- SpreadRange是发声源属性</p><p>- 其他同上</p><p>- 针对武器之类的特殊对象，应该产生多次发声源，例如：</p><p>- 远程武器开枪时在玩家位置发声，子弹被销毁时在销毁位置发声</p><p>- 这里有个小问题：子弹的自然销毁不应该触发声音/听觉事件</p><p>- 近战武器挥舞时在玩家位置发声，SpreadRange一般为0</p><p>- 近战武器击中目标时在玩家位置发声，SpreadRange一般>0</p><p>- 这里有个小问题</p><p>- 玩家位置是最简单的</p><p>- ~~击中位置是最合理的，但可能有点难做~~</p><p>- ~~敌人的位置在面对大型敌人时，可能有巨大的位置偏差~~</p><p>- 声音衰减的计算情况如下，简单来说，下图3种情况都视作衰减1次，处理一次DecayRatio</p><p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.012.jpeg)</p><p>- **触摸**</p><p>- **~~方案1：~~**</p><p>- ~~玩家如果进入AI自身胶囊体半径{110%}的范围，会触发触摸响应~~</p><p>- ~~也即玩家的胶囊体和AI的几乎完全贴上，但并不是以接触为判定~~</p><p>- **方案2：**</p><p>- 玩家和AI自身胶囊体触碰，会触发触摸响应</p><p>- 也即玩家的胶囊体和AI的胶囊体碰撞作为判定</p><p>- 触发触摸响应后，被触发的AI会获得玩家位置</p><p>- **受伤**</p><p>- AI受伤时，如果不处于战斗loop（没有玩家坐标或玩家潜在坐标）会获得伤害来源方向</p><p>- AI应当尝试面向该方向，如果没有看到玩家，对该方向上的最近一个障碍物巡逻</p><p>- 如果伤害源是子弹，方向应该是子弹来源方向</p><p>- 如果伤害源是爆炸物，方向应该是爆炸物的爆炸源</p><p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.013.jpeg)</p><p>- **视觉**</p><p>- **团队**</p><p>- AI的团队协作由广播驱动，主要由两方面构成：触发机制和响应逻辑</p><p>- 触发机制：会导致AI发起广播的行为</p><p>- 目击玩家</p><p>- 响应逻辑：AI触发团队事件后的行为</p><p>- 无响应</p><p>- 团队广播：将玩家坐标广播给附近{600cm}范围内的队友，警戒</p><p>- 获得玩家坐标（非目击）</p><p>- 响应逻辑：AI触发团队事件后的行为</p><p>- 无响应</p><p>- 团队广播：将玩家坐标广播给附近{600cm}范围内的队友，警戒</p><p>- **推测**</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TdkxdEEtjohnt6xRihVcvTCMnYd#XuW7dPG0esIYQzbdIF3ce2pdnpN></p>```
- 孤立功能 -> 0.0.2
- 战斗逻辑：先找个合适的案例？
- 上行战场
- 诡野西部
- 听觉事件要自己写逻辑
- 伤害事件是ue内置逻辑
- 触摸事件
- 碰撞会意识到玩家存在
- 攻击事件
- 调用攻击GA，只会触发一次
- 关卡功能
- 等孤立功能实现后，在关卡内调试.

需要能显示敌人数值 -> 需要一个debug功能、

**体力系统**

- ~~当前方案~~
- ~~只减少当前值~~
- 完全不减 -> 0.0.2

\4. **机制**

4.1 **属性系统**

4.2 **装备系统**

- 基于新的设计调整武器和义体
- ~~武器没有被动，义体没有主动@Decay⏰2024-10-23 08:00~~
- 考虑：是不是可以修改护甲系统，让它更有趣味性，而不是生命值的extra？
- 护甲提供伤害减免，从而差异化高频武器和低频武器
- 护甲通过某种渠道可恢复，移除修复站？
- 不受伤时每秒恢复？
- 通过gameplay机制恢复？
- 但数值变得更少（从开始时生命的10% -> 结束时50%）
- ~~撰写了一个python脚本，可以严格按照规则生成UUID@龚政涛⏰2024-09-15 08:00~~

**[uuid\_auto\_fill.py]**

\5. **关卡**

5.1 **奖励系统**

- ~~符合预期的玩家升级系统@Decay~~
- ~~需要一个打印机，可以让玩家购买义体@Decay⏰2024-09-17 08:00~~
- ~~购买只能操作{1}次，并且在关卡锁定后无法再次操作@Decay⏰2024-10-07 08:00~~
- 玩家如果选择升级，则无法选择购买
- ~~购买的义体应该能真的作用到玩家属性&技能@Decay⏰2024-09-18 08:00~~
- ~~玩家应该有1次刷新菜单的机会@Decay⏰2024-10-08 08:00~~
- ~~需要一个菜单，可以让玩家看已购买的义体@Decay⏰2024-10-09 08:00~~
- 武器同义体
- 一个可能的方案：
- 测试的前提条件
- 关卡切换系统成立
- 足够数量（期望12）的关卡上线
- 打印机不再三选一，而是只提供一个候选项
- 简化UI，简化玩家单次选择负担
- 哈迪斯不也是么 -> 只是哈迪斯的毕业装备没有那么多
- 玩家可以选择刷新打印内容
- 刷新消耗信用点 - 局内资源消耗点 -> 先试一下这个
- or：刷新有固定次数 - 局外升级点
- 每层可以有多个打印机
- 提高探索期望
- 玩家可以在打印机选择融合打印
- 因为只有一个候选项了，所以很好选
- 这样也能解决单独的融合打印机很傻的问题
- 也不会有废奖励的情况出现
- 非暂停的奖励获取也变得可行：因为奖励获取的选择时间很短
- 武器升级在专门的升级设备进行
- 更稀有
- Same as 哈迪斯

5.2 **关卡构成**

- ~~现有的关卡复杂度过高，考虑优先以玩家体验为目标设计更精简的关卡@苏祺恒@龚政涛~~
- ~~也许尝试多个电梯的设计，回到原点的设计感觉并不理想@苏祺恒@龚政涛~~
- ~~敌人掉落物似乎没有必要？尝试更多的奖励机器（子弹贩卖机、信用金库）而敌人不掉落子弹和信用点@苏祺恒@龚政涛~~
- 这个设计可以解决很多小的角落空间给玩家带来了探索需求却没有探索奖励的问题。
- ~~电梯权限在最后一个敌人死后直接给玩家，而非拾取电梯卡获得@Decay~~
- 也可以解决玩家杀了最后一个敌人忘记拾取电梯卡的问题。
- ~~掉落系统依旧可以存在，但我还是觉得从敌人尸体身上拾取更为合理，因为和奖励机器交互的逻辑保持了一致，减少玩家的学习曲线/成本@Decay~~

5.2.1 **推进循环**

- **v0.0.2 - 目标 @Decay**

|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.014.jpeg)</p><p><br>同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TdkxdEEtjohnt6xRihVcvTCMnYd#LIhCdd7TGsyRWSb9MBHcAkUCnog></p>|
| :-: |
- **v0.0.1 - 实际实现**

|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.015.jpeg)</p><p><br>同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/NwGedcKMfoolsIxU45zcV321nDh#XiZhd1LZysfoazbdZYGcKdzjnsf></p>|
| :-: |
5.2.2 **场景构成**

5.2.2.1 **门 @Taobe**

```<p>- 游戏中有固定类型的门</p><p>- 针对不同Boss的层级，门有不同的视觉风格，但尺寸和功能不变，以确保玩家有熟悉的感觉</p><p>- 电梯门：</p><p>- 电梯厅连接</p><p>- 由于不同楼层可能有不同的装饰风格，因此电梯厅门可能各有不同</p><p>- 在场景搭建时，直接将门与电梯厅墙壁，配置到流送关卡而非常驻</p><p>- 电梯厅门：</p><p>- 奖励房间门：</p><p>- 普通房间门：</p><p>- 大型空间门：</p><p>- 普通门洞：</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TdkxdEEtjohnt6xRihVcvTCMnYd#IPVPdjrynsh9drbWXIzc5S6MnRe></p>```
5.2.3 **搭建流程**

```<p>- **~~v0.0.1 Issue~~**</p><p>- ~~因为用了现成素材，但没有概念图，对场景搭建局限性比较大~~</p><p>- ~~没有输入给@Arthur Li，也没有基于该内容出图给@Joyce Jiao~~</p><p>- ~~白模没有玩上/测试上，也没有验证~~</p><p>- **v0.0.2 Action**</p><p>- 优化关卡搭建流程</p><p>- 提前准备标准化尺寸的生产素材，建筑场景由标准化的模型尺寸构成@Taobe</p><p>- 房间高度下调到3米</p><p>- 2位策划先搭建白模，验证白模可行性@Taobe@Cade</p><p>- 用生产素材替换一部份白模内容@Taobe</p><p>- 场景美术基于用生产素材的白模出图@Arthur Li</p><p>- 地编基于出图替换、精修生产素材的白膜@Joyce Jiao</p><p>- Camera clipping实现3m以上的墙面顶部黑边@Decay</p><p>- 场景参考@Taobe</p><p>- 窗外的不夜城夜景日景 -> 通过天空盒 or 低模外围建筑实现？@Joyce Jiao</p><p>- 提高整体场景亮度@Joyce Jiao</p><p>- 我们是尝试构建夜晚的办公室，不是没电的办公室</p><p>- 但目前红灯模式下的亮度也许正好？</p><p>- 所有奖励房间应该有固定布局，并且在场景内确保房间内的物品永远在上面2条边@Taobe@Cade</p><p>- 策划先搭建白模，地编进行房间内场景优化</p><p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.016.jpeg)</p>```
\6. **奖励**

成长性奖励

非成长奖励

**故事**

\1. **剧情**

- **后续安排**：
- ~~整理剧本文档框架@龚政涛@Serein⏰2024-09-05 08:00~~
- ~~撰写全部主线&某些支线剧情大纲@龚政涛@Jade@Serein⏰2024-11-26 08:00~~
- ~~使用Twine进行测试@Jade@龚政涛@Serein⏰2024-09-05 08:00~~
- 0.0.2开始，切入到主控角色视角
- 考虑到我们整体规模，我觉得是时候开始上手在游戏里塑造人物（美术上&剧情上），验证叙事手法，并且建立后续优化的基准
- 完善主线剧情
- 测试+验证碎片化叙事手法
- 0.0.1版本参与度太低
- **碎片化叙事测试**

@Serein

- 主线剧情流程
- 主线剧情对话
- Galatea & G.A.L.A.人设
- Galatea & G.A.L.A.剧情
- Galatea & G.A.L.A.对话
- Shalott人设
- Shalott剧情
- Shalott对话

@Jade

- canon人设
- canon剧情
- canon对话

**美术**

\1. **Workshop**

**10/19**

1. Todo -> 
1. 找个岩块的素材给chloe（.mb文件，fbx可能会失败？）
2. 根据逻辑重新paint over（也许加上岩块地面，体现阴影关系）
3. 噪点？Glitch？我再找点方案看看能不能技术上测试一下
2. TBC
1. 视野区域外的抽色逻辑
3. Remark in figma

**[该类型的内容暂不支持下载]**

4. 测试图paint over

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.017.jpeg)

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.017.jpeg)

5. 明确逻辑
1. 描边
1. 受光面边缘（动态）-> first
- 应该有一个函数/参数，驱动描边的{颜色深度}随{光照强度}变化而变化
2. 被光面边缘（动态）-> first
3. 非边缘面 -> tbc
4. 接地面边缘（等价于两个对象靠在一起时候，靠前对象的重叠边缘）-> second
5. 过度方式：粗细？深浅？
2. 色散 -> 用于表现残血状态？感觉比红屏要有水平
1. 边缘
2. 阴影
3. 额外追加噪点/glitch效果？具体TBD
- 把Glitch和噪点作为单独的特效模块，便于测试、配置，因为有其他情况也会调用这个效果
- 应该有一个{参数}，决定色散出现的{血量百分比}
- 应该有一个{函数/参数}，决定色散随{血量百分比}降低而{夸张化的程度}
3. 阴影
1. 圆点
2. 在高光和背光过度面用小圆点（渐变）过度
- 需要有一个基础的波点尺寸/纹理素材
- 波点出现在阴影和超高光光点
- 波点的大小应该随着该位置原有的阴影/高光深度变化而变化，逐渐从最大渐变到最小
- 波点的颜色应该随着该位置原有的阴影/高光颜色变化而变化
- 对于投影：还需要配合更复杂的地形进行paint over测试效果
- 应该有一个{函数/参数A}，决定超过多少深度（黑度？）的阴影就不出现波点而是全黑
- 应该有一个{函数/参数B}，决定从阴影过度超过多少亮度的阴影就不出现波点而是全亮
- 应该有一个{函数/参数C}，决定超过多少亮度的高光就不出现波点而是全亮
- 应该有一个{函数/参数D}，决定从高亮过度低于多少亮度的高光就不出现波点而是全亮
- 如下图
- 比A更黑的应该就是全阴影（自然阴影），A是阴影波点出现的阈值
- 比B更亮的应该就是正常光照，B是阴影波点消失的阈值
- 比C更亮的应该就是全高光（自然高光），C是高光波点出现的阈值
- 比D更暗的应该就是正常光照，D是高光波点消失的阈值
- A～B之间出现渐变的阴影波点
- C～D之间出现渐变的高光波点
- 渐变应该这样实现：波点和波点间距不变，波点本身的亮度/透明度也不变，但每个波点越淡则直径越小
- 可能的小技巧：C以上和A以下的区域也可以不做特殊处理：只要让波点的直径大于波点间距即可。

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.018.png)

3. 在drop shadow不做特殊处理
4. 遇到阴影深度不一致的情况：用一个阈值决定是否出现波点；用阴影原本的深度展示波点深度
4. 色块
1. 赛璐璐风格的大色块切换
6. 调整测试图
7. 在正式场景里paint over

**10/14**

1. 完美的解决方案：战争迷雾外的部份（灰色层）不做灰色，而是抽颜色/光照通道效果
2. 再加上噪点过度（和透视一样要做）

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.019.jpeg)

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.020.jpeg)

\2. **角色 @Ke Huang**

**9/18**

- ~~风格化paint over@Ke Huang⏰2024-11-03 08:00~~
- 优化Drifter头像 -> necessary？
- 其实看了Galatea和夏洛特的头像以后，会觉得质量比之前出的Drifter高很多
- 面具设计遇到困难
- 但我想说玩家头像出现的频率多么？老头环里玩家几乎只有极其简短的回答，是一个空白角色
- 和ui设计高度相关

**Discard**

- ~~完成Drifter全身造型~~
- ~~等头像好了再整，主要是希望输入给3D模型老师做建模~~
- 放弃，暂时不改模型
- 完成「劳旅」的广播喇叭头像
- 完成「浩」的广播头像 - 模糊
- 完成中年颓废的「夏洛特」头像 - 平静
- 正式版游戏的形象
- ~~主控 -> 平静@Ke Huang⏰2024-11-17 08:00~~
- ~~主控 -> 激动@Ke Huang~~
- ~~主控 -> 消沉@Ke Huang~~
- ~~面具要找一下灵感@龚政涛~~
- “游民”夏洛特@Ke Huang
- ~~劳旅 -> 广播@Ke Huang~~
- 插图：[“头儿” - 浩](../跃入迷城 - GDD/故事/设定Wiki/角色/VIP/“头儿” - 浩.md)@Ke Huang
- ~~劳旅 -> 浩 - 模糊@Ke Huang~~
- ~~劳旅 -> 浩 - 激动@Ke Huang~~
- ~~每周更新~~
- ~~周六上午的时间不OK，改工作日中午~~

\3. **场景 @Arthur Li**

- 基于策划给出的白模，完成场景美术概念图
- 我们应该会提供5～10个关卡，但只取2～3个特别有代表性的场景，且其中第一个用于定义风格，最关键

\4. **UI**

- ~~整理UI相关会议纪要和规划@龚政涛⏰2024-09-01 08:00~~
- 整体调整方向？
- 对话 -> 现在跳出来和实际游戏场景有点割裂
- 主体对话：调整风格，简化
- 广播&场景交互：实装一下电影风格的字幕
- hades是字幕+配音+配色

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.021.jpeg)

- 菜单部分 -> 调整
- 字段太多了，还能怎么简化？
- 选装备不能看技能？
- 武器只有主动，义体只有被动？yes
- 非菜单部分 -> 需要实装
- 优化UI集成方案 @Taobe@Decay@Zoey
- 随时集成、随时在游戏内验证、随时调整
- 可能的尝试
- 多试几个lofi集成到游戏内的case，而不是直接一路做到hifi？
- ~~追加一位UI设计师@Zoey@龚政涛~~
- 集成状态菜单UI
- 菜单：需要简化 
- 显示2层：缩略+详情
- 先做一些草稿实装到游戏里（不一定要能交互，先看下转视角的效果
- ~~先把场景搭出来截个图，作为参考@龚政涛⏰2024-09-04 08:00~~
- ~~武器只有主动，义体只有被动@Decay⏰2024-09-22 08:00~~
- 融合打印和购买放一起，升级单独？
- 融合打印单独，升级和购买放一起？
- 打印机是不是可以尝试沉浸式而非菜单式UI？
- 交互时镜头缩近到打印机面前、隐藏主控角色@Decay
- 问题是这时如果玩家被敌人攻击怎么办@Cade@Zoey
- 方案1：最简单的方法，放弃“不暂停”的设计，但对游戏整体风格有些影响
- 非菜单：需要优化
- ~~角色数值UI显示@Zoey@龚政涛~~

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.022.png)

- ~~集成场景内交互菜单UI（涂鸦等）@Decay~~
- ~~立体菜单UI方案@Zoey@龚政涛~~
- ~~先不说内容，看下这种“在摄像机前放一个canvas”的方案是否可以实现？@Decay⏰2024-09-22 08:00~~

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.023.jpeg)

- ~~集成广播UI@Decay~~
- ~~可交互对象的高亮小点应该always存在，在玩家移动到交互box内转变为{F}键的提示@Decay~~
- ~~对话菜单：简化@龚政涛@Zoey~~
- ~~整体配色：先统一，然后再整体调整@Zoey@龚政涛~~
- ~~字体：需要统一明确@Zoey@龚政涛~~
- ~~字体的场景定义@龚政涛⏰2025-07-28 08:00~~

\5. **VI**

- ~~Logo？@龚政涛~~
- ~~提供双箭头的一个草稿@龚政涛~~
- 提供游戏LOGO的草稿@龚政涛

**音乐音效**

\1. **SFX**

- 管线优化
- Wwise
- 策划 -> 音效需求
- 程序 -> 音效事件
- SFX -> 提供音效，放进wwise（知道事件名就可以）
- 设定输入 -> 本周
- 视觉输入 -> 持续
- 音效制作：持续集成

**0.0.1 feedback**

- 视觉太暗
- 场景互动太少
- 手感复杂 -> 可能是缺少教程导致？

**To-do**

- ~~定义音效事件@龚政涛@苏祺恒⏰2024-09-14 08:00~~
- ~~定义音效事件名@龚政涛~~
- 音频事件命名规则如下：
- 音频事件对于不同类型在不同位置记录：
- 武器相关：在武器列表记录

- 角色、场景、UI、通用，在如下列表记录：
- [音效需求](../跃入迷城 - GDD/音乐 & 音效/音效需求.md)
- ~~需要指导get一下perforce工程@龚政涛~~
- ~~下载perforce@李奕慧⏰2024-09-03 08:00~~
- ~~下载ue引擎@李奕慧⏰2024-09-08 08:00~~
- ~~通过perforce下载工程@李奕慧⏰2024-09-08 08:00~~

**模型动画**

\1. **模型**

- ~~介入一位模型老师~~
- ~~组织模型老师和joyce、chloe的会议~~

\2. **动画**

**v0.0.2整体方案**

```<p>- 集成Lyra动画方案</p><p>- ALS的工程化存在太多问题，直接使用Lyra效果更好</p><p>- ~~探讨是否用Motion Matching / GASP代替Lyra -> NO~~</p><p>- ~~总结一下，motion matching比较适合非常大量的动画素材做混合，比如：真人捕捉~~</p><p>- ~~GASP：来自ALS作者的Motion Matching实践项目，类似于Motion Matching版本的ALS~~</p><p>- ~~可能对于我们的项目太过复杂，主要探讨的问题是：GASP是否能在有限的动画素材、投入时间的前提下，提升我们需要用到的动画质量~~</p><p>- ~~对Boss等复杂动画对象，单独采用GASP也是可能的方案？~~</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/BrjydmB7UoK0fxxvomFcjjoNnCf#H3p6dl0GZsNAeMbUlC7cz7FNnTb></p>```
**Blend Space问题**

- 在朝向和移动方向有差异时，诡异的太恐怖@Decay

**[2024-09-15 23-13-50.mp4]**

- 翻滚的ending和站立衔接不流畅@Decay
- 这个挺明显的我就不截视频了

**近战攻击问题**

```<p>- 针对近战攻击动画（根动画）带来的位移，有2个解决思路，待确认</p><p>- 通过上下身动画混合，所有近战攻击动画只播放上半身，大部分第一人称射击游戏都这么做</p><p>- ~~通过根动画，让人物跟随动画移动，大部分第三人称ARPG都这么做~~</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TdkxdEEtjohnt6xRihVcvTCMnYd#DCGcdrxV7seHo6byrGDc2Z5Wn7d></p>```

**Kick off Meeting**

```<p>**会议主题**：0.0.2目标和计划安排</p><p>**参会人员**：</p><p>**会前必读**：[v0.0.2](v0.0.2.md)</p>```
**Part 1 - UI & VI**

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.024.jpeg)

**Part 2 - 关卡**

```<p>- **白模**</p><p>- 标准化素材？</p><p>- 做了几个范式，是不是🆗？</p><p>- 战斗节奏</p><p>- 已经可以顺利在工程内测试了吗？@Cade</p><p>- 是否需要先调整合适的AI，再调整关卡？</p><p>- 我觉得可以同步？</p><p>**材质**</p><p>1. 大部份材质会共用一个master材质</p><p>**角色**</p><p>1. ~~重做所有人型角色？~~</p><p>2. 用现成的人型角色，但做优化 -> delay</p><p>a. 换衣服</p><p>b. 缩头</p><p>3. 直接用现成人型角色 -> must</p><p>4. Boss怎么办 -> 采用现成素材不行的情况下再重做</p><p>**Shader**</p><p>- 计划？</p><p>**场景美术**</p><p>- 概念图的启动时间？</p><p>- 需要的输入 -> 白模完成</p><p>- 贴图的计划？</p><p>- 是不是可以放到孤立的墙壁上看一下？</p><p>- 涂鸦类的可用</p><p>- 裂痕类的实在不太能用</p><p>- 贴花最好共用同一个trim sheet，在外部软件（zbursh/substance painter/)里烘焙，然后单独的贴花plane放回ue里place</p><p>- 可以用megascane的素材试一下流程</p><p>**关卡搭建**</p><p>- 打光</p><p>- 场景细化/替换</p>|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.025.jpeg)</p><p>- **后续安排**：</p><p>- ~~白模关卡测试@苏祺恒@龚政涛⏰2024-09-13 08:00~~</p><p>- ~~标准化素材替换@龚政涛⏰2024-09-06 08:00~~</p><p>- ~~出一个程序员审美版本的shader功能@Decay⏰2024-09-11 08:00~~</p><p>- ~~调整shader细节@龚政涛@Decay~~</p><p>- ~~涂鸦和裂痕实现1个@Joyce Jiao~~</p><p>- 此任务已被删除</p><p>- ~~测试meta scane素材应用到场景@龚政涛⏰2024-09-16 08:00~~</p><p>- ~~大部份材质会共用一个master材质@Decay⏰2024-09-10 08:00~~</p><p>- 后续污渍的实现：贴花？</p><p>- Volumn Matix贴画性能消耗可能过大</p><p>- 商用材质有很多自发光贴图</p><p>- 如果需要是可以去掉的</p><p>- ~~准备AI概念草图@龚政涛~~</p><p></p>``` :-: |
**Part 4 - 剧本**

**Part 5 - 美术 & SFX**

```<p>**美术**</p><p>- 主控 -> 平静</p><p>- 主控 -> 激动</p><p>- 主控 -> 消沉</p><p>- 夏洛特 -> 中年 - 平静</p><p>- 劳旅 -> 广播</p><p>- 劳旅 -> 浩 - 平静</p><p>- 劳旅 -> 浩 - 模糊</p><p>- 劳旅 -> 浩 - 激动</p>|<p>**后续安排**：</p><p>**测试**</p>``` :- |
**测试**

**10/7**

进一步测试以后，梳理了一下目前版本的情况，现在P0的大问题有3个：

1. 敌人的反馈和交互不好
2. Build系统不成立，玩家的成长体验和交互体验不好，也没有感到独特性
3. 关卡推进的体验不好，存在感弱，并且强度平衡有问题

仔细拆解以后，我想到以下方法分别解决这几个问题：

**问题1**

1. 问题非常多，但是暂时没办法，就是要@Taobe和@李少秋一点点修复
2. 交互和动画+ui系统强相关，等待重构后树立
1. 敌人不同的动画状态

**问题2**

1. Build系统现在有以下几个问题
1. 强度成长过快
1. 玩家获取装备的节奏没有控制好 -> 资源 & 关卡布局相关，间接也和AI强度 & 数值相关
2. 选择体验差
1. 玩家在装备获取时需要确认的信息太多 -> 打印机设计 & UI相关
2. 通过以下几个设计，我预计能够解决这些问题
- 义体打印机和武器打印机一次只生成一个候选项，移除升级功能，追加融合打印功能 -> 解决要读的内容很多，并且可选的很少（可能3个武器都是废物）的问题
- 武器和义体追加价格变量，体现在购买时消耗信用点 -> 解决无限资源导致玩家强度提升过快的问题
- 打印机获得刷新功能，刷新需要消耗信用点 -> 解决无限资源导致玩家强度提升过快的问题
- 新增武器和义体升级器，升级需要消耗信用点（这个设计可能会移除，要测了再看） -> 解决无限资源导致玩家强度提升过快的问题
- 武器和义体的生成候选逻辑修改：改为与LV层数相关
1. 公式待定@Cade，我暂时想的如下：[物品列表](https://dikpa4hrtn9.feishu.cn/wiki/IbdswSAf1iFX9Ik5LRDcg02LnTb?from=from_copylink)
1. 每个装备在打印机里有{初始随机权重}和{层级系数}
2. 每个装备的最终随机权重 = {初始随机权重} + 当前LV / {层级系数}
2. 每次随机遍历整个装备池，基于权重随机一个装备
3. 之前犯的一个低级错误：玩家在LV12之前获得高等级装备的概率应该极低

**问题3**

1. 关卡系统现在有以下几个问题
1. 关卡切换的存在感过弱
1. 感觉就是刷新了敌人而已 -> 切换机制问题
2. 敌人强度变化也不够大 -> Build节奏问题 & 敌人补充问题
2. 通过以下几个设计，我预计能够解决这些问题
- 制作更多（大概14\*2\*2）个地图
- 其中{14}代表关卡数，关卡{15}应该是BOSS关
- 第一个{2}代表每个关卡的地图场景变量，也即每一关至少有2个不同的地图
- 第二个{2}代表每个地图场景变量的奖励变量，也即每一个地图至少有2种奖励布局
- 关卡datatable追加LV变量，特定的MAP只允许在特定LV生成 -> 解决布局问题
1. 加在下图TestLevel1这一层，也就是会有多个可以生成在LV1的MAP，但一次只生成一个
- 电梯追加交互选项，可以选择上楼or下楼 -> 解决关卡切换的控制感知弱的问题
1. 上楼则向上LV+2
2. 下楼则向下LV-1
3. 如果LV-1已经去过，则没有下楼选项

Tbd 战斗强度问题

做一个arena测试各种敌人的战损比

1. 无限子弹
2. 预先配置敌人组合和类型、武器
3. 自动统计生命值
- ~~一个Level允许有多个敌人MAP，后续的敌人MAP会在上一批敌人死到最后{1~3}个（随机）时被生成 -> 解决敌人波次少的强度问题~~
1. ~~新增的敌人会在MAP里被放好位置，但生成时一个个从开着门的电梯或者阳台SPAWN~~
1. ~~相当于给敌人一个默认的寻路任务，从出生点到达目标点进入静态/巡逻，这个任务和常规寻路任务一样，会被更高优先级的任务（玩家视觉事件 > 伤害事件 > 队友死亡广播事件 > 听力事件）打断~~
2. ~~SPAWN的位置可以用N个锚点放到地图里，AI应该一个个SPAWN避免bug~~
1. ~~N个锚点会随机生成N个敌人，总数不变，相对于一个MAP的敌人池随机分配~~
2. ~~后续可能需要一些技巧来优化表现力，动画之类的，暂时就SPAWN了走出来就行~~
1. ~~比如电梯内的锚点应该是一次性SPAWN在电梯里，开门后一个个走出来~~
2. ~~阳台的锚点应该是一群敌人坐在飞行面包车上一个个跳下来~~
3. ~~玩家可以批量击杀，但照理说无法同时击杀所有锚点的敌人~~
3. ~~首先有地图~~
4. ~~其次地图里有敌人要刷新的出生点~~
5. ~~其次有一个敌人池子~~
1. ~~3种20个~~
6. ~~有几个参数，设置需要几波里面把池子里的敌人刷完~~
1. ~~4波；第一波a类x，b类y；第二波a类x，b类y；~~
7. ~~生成敌人~~

![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.026.png)

**10/5**

**游戏节奏测试**

**跃入迷城**

**耗时**

Level 1 = 93s, 61s

Level 2 = 35s, 32s

Level 3 = 38s, 31s

**强度**

- 过低，敌人根本不堪一击，这一点和哈迪斯差异倒不大，但数量太少
- 缺少补充敌人导致，从阳台/电梯厅追加敌人的设计需要尽快实装
- 敌人的攻击欲望过低而伤害过高
- 地图尺寸太不均匀
- Lv1太大，Lv2、3太小（2其实作为第一关还行）
- 缺乏冲击力系统和攻击提示UI，导致玩家和敌人缺少互动

**缺失的Feature和目前的问题**

**明确需要**

- 关卡list（那个datatable）应该有一个额外的属性{兼容楼层}，明确其可以出现在的Lv@Decay
- 例如，有两个{兼容楼层}为Lv1的MAP，则生成Lv1时，应该从中随机生成
- 一个MAP可以配置多个可用Lv
- 关于奖励物品的掉落期望，暂时考虑从MAP中配齐，也即所有的MAP总和的奖励期望和设计期望类似，不通过特定的伪随机算法选定奖励
- 玩家每次和电梯交互，前往下一个Lv@Decay
- 敌人AI响应还是没有按预期工作
- 目前AI不响应伤害和声音，也不响应（可能是没播放）死亡广播
- 目前远程AI还是无法从移动和攻击状态切换，一旦进入攻击状态就会死盯着玩家
- 远程敌人的攻击弹道严重偏移
- AI又不能伤害蹲伏状态的玩家了
- AI还有一些额外工作需要完成
- 玩家的脚步声应该是一个听力事件，只在非蹲伏情况有效
- AI寻路需要优化2个方面
- AI应该忽视门进行寻路，并且能自动打开非锁定的门
- AI寻路应该能正确避让队友，别被卡死
- 目前近战AI的行动逻辑有些奇怪，可能需要改成攻击欲望全满后才开始追踪玩家？在那之前参照远程敌人，执行观察动作，理想情况下最好是执行围绕玩家的慢速徘徊动作
- 奖励锁定系统
- ~~关卡锁定后，所有奖励应该无法访问@Decay⏰2024-11-26 08:00~~
- ~~信用点系统@Decay⏰2024-10-29 08:00~~
- 由于信用点的缺失，导致玩家获取装备太过容易
- ~~从尸体拾取的系统@Decay~~
- ~~掉落系统依旧可以存在，但我还是觉得从敌人尸体身上拾取更为合理，因为和奖励机器交互的逻辑保持了一致，减少玩家的学习曲线/成本@Decay~~
- ~~翻滚应该忽略Character的碰撞体积@Decay~~
- ~~翻滚时没有和角色的碰撞体积@Decay⏰2024-11-09 08:00~~
- ~~电梯卡直接给予的功能@Decay~~
- ~~电梯权限在最后一个敌人死后直接给玩家，而非拾取电梯卡获得@Decay~~

**需要但代办/长期**

- 制作白模地图@刘禹希@龚政涛
- Lv2是目前比较好的例子，可以比它稍微复杂
- 目前总结到一些规则：
- 地图的最小单位是2x2的地块，除非用于填充特殊比例空间
- 离开每个地图的出生点后，地图应该进入主路径
- 主路径应该提供较大的战斗空间，但可以以平铺或者拉伸的方式展开
- 大约占10个4x4的地块？
- 地图应该在主路径包含3个分叉点，让玩家选择移动的方向
- 除了分叉点导致的地毯式排查，地图不应该让玩家走回头路
- 不应该让玩家有“查漏补缺”的感觉
- 奖励房间没有敌人
- 奖励房间附近应该？有迷惑玩家的空间或房间，包含陷阱性质的敌人
- 子弹贩卖机不需要出现在房间内，用于填充死路的终点，提供心理补偿
- 基于哈迪斯的参考，整理的我们的分配如下：

```<p>- 50%成长性奖励</p><p>- 30%的楼层提供打印机，其中武器和义体各一半</p><p>- 20%的楼层提供升级器</p><p>- 40%非成长性奖励（恢复和子弹，子弹占20%）</p><p>- 高于哈迪斯，因为我们有子弹这茬</p><p>- 10%局外资源（目前只有信用点）</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/ESeQdmbMKoVr9tx45Boczo41nqf#USRDdsDTHsCQ8TbOLGgccobcnfh></p>```
- 我们的设计：[关卡设计](https://dikpa4hrtn9.feishu.cn/wiki/SBUQw11QGiUvvNkDo8OcqZNfnOe?from=from_copylink)
- 一些和gameplay而非美术强相关的UI系统
- 需要让玩家能识别AI确定攻击的瞬间
- 目前这个AI事件已经存在，但没有对应的UI显示导致玩家无法互动
- 武器的散布应该在指针上体现，散布越大，指针扩散越大
- 冲击力/硬直系统策划设计
- 实装冲击力/硬直系统
- 敌人补充系统
- 敌人应该在战斗进行到“只剩下X个存活敌人”时，从阳台或电梯补充

**需要决策/思考**

- ~~建议先移除/屏蔽冲刺@龚政涛@苏祺恒⏰2024-10-30 08:00~~
- 基于规则的关卡生成
- 玩家和电梯交互时，应该显示能前往的楼层，楼层和掉落规则详见：[玩法](https://dikpa4hrtn9.feishu.cn/wiki/W6WSwDwfriKFu2knYnFcLsYpn7g#share-RPMXdH9mdootXFxXGnXckKWmnMg)
- ~~在处理关卡相关的功能前，应该先明确切换规则@苏祺恒@龚政涛~~
- 我再这里整理了大部分游戏的关卡切换逻辑，并且整理了我希望我们实施的方法

|<p>![...](../跃入迷城%20-%20子版本规划/images/v0.0.2.027.jpeg)</p><p><br>同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/L9GXdqd74of0eYxBl8Wc0WAJnfd#MMWtd8AsRsJmU0b5SljciqmUnpf></p>|
| :-: |
- ~~处理方法建议：一边思考关卡切换的方案，一边先用更基础的方法测试我们的build和战斗部分~~
- ~~现在我们有几个方案~~
- ~~上下切换楼层~~
- ~~传统切换方案~~
- ~~详见上面的连接~~
- 关卡切换到底需要处理什么：
- 常规游戏中，玩家不决定强度（默认每一层会比上一层强一点点）只决定自己需要的奖励
- 这是一个“奖励期望”（A）-> “决定关卡”（D）-> “获得特定奖励”（M）的循环
- 如果用我们的设计：奖励的期望是不可控的，每一层都有可能出现打印机，并且玩家不知道
- 玩家通过几次游戏后会知道：你总共会获得的奖励次数是固定的
- 反馈不直观，是不是会降低玩家的“控制”感？
- 玩家可以决定自己要面对的关卡强度和数量，来重获“控制”感
- ~~可能的设计：玩家可以前往任意没有去过的楼层，很特别，但交互要怎么展示呢？~~
- ~~这和玩家随时可以前往顶楼有什么区别？~~
- ~~可能的设计：玩家不能向下坐电梯，但可以选择向上一层、两层或三层~~

**Hades 2**

**记录**

Lv1 = 11s, 1 wave, 成长性奖励

Lv2 = 12s, 2 wave, 局外资源奖励

Lv3 = 21s, 2 wave, 成长性奖励

Lv4 = 24.5s，2 wave，成长性奖励 + 非成长性奖励

Lv5 = 38.9s，4 wave，成长性奖励 + 局外资源奖励

Lv6 = 非战斗，NPC，非成长性奖励

Lv7 = 29.7s，小Boss，成长性奖励

Lv8 = 26.2s，2 wave，局内资源奖励

Lv9 = 25.6s，2 wave，精英怪，成长性奖励

Lv10 = 38.5s，3 wave，局外资源奖励

Lv11 = 21.2s，1 wave，精英怪，成长性奖励

Lv12 = 非战斗，NPC，商店

Lv13 = Boss，102.6s，局外资源奖励

**统计**

- 时长：10:37的总时长，其中5:49在战斗
- 战斗时长占比大约50%
- 关卡锁定是个好主意吗？想象中的效果应该是：
- 我们的战斗时长占比大约在80%
- 其中一部分时间玩家应该在获取奖励
- 完成战斗关卡后的空白时间段更短，但会被用于NPC对话
- 每12关到Boss，中间有2个非战斗关卡，用于调整玩家节奏
- 实现：肯定不能hardcode，需要一些伪随机算法
- 大部分关卡有小怪补充，平均战斗时长大约10s每wave，地图面积小
- 参考：可能不太合适，我们更多类似于黑魂那样group的怪物形式，参考下暖雪，找一个折中点
- 去掉商店，所有奖励比例如下：
- 成长性：7/14
- 非成长性：2/14
- 局外资源：4/14
- 局内资源：1/14
- 简单量化的话：
- 1/2的楼层提供成长性奖励，成长性奖励包括
- 直接给新技能（祝福，占至少50%；对应到我们的游戏：打印机）
- 提升现有技能（石榴+锤子，占大约25%？对应到我们的游戏：融合打印）
- 提升数值（半人马心脏，占大约25%？对应到我们的游戏：无，我们的数值直接在装备给了）
- 结论：

```<p>- 50%成长性奖励</p><p>- 30%的楼层提供打印机，其中武器和义体各一半</p><p>- 20%的楼层提供升级器</p><p>- 40%非成长性奖励（恢复和子弹，子弹占20%）</p><p>- 高于哈迪斯，因为我们有子弹这茬</p><p>- 10%局外资源（目前只有信用点）</p>```
**10/4**

**Bad**

- 连续关卡里都有义体打印机的话，玩家升级会太快
- 关卡尺寸太不稳定，忽大忽小而且缺乏合理性
- AI还是太蠢完全没有挑战性
- 冲刺功能感觉可以删了
- 没用，我都有翻滚了
- 手感也很差，动画也有问题，而且从哈迪斯2也没处理好的情况来看，很难解决

