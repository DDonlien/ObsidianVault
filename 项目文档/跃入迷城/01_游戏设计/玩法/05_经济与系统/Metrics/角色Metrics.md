
**角色Metrics**

1. 游戏中[玩家](https://dikpa4hrtn9.feishu.cn/wiki/WPj2wsExkii3FCkbJ4Dcv6GwnSg)角色（和[敌人](https://dikpa4hrtn9.feishu.cn/wiki/YLplwkU0RiKrE8kd7acc8dhInnj)）都有各自的角色属性，其中有些属性可以独立增减，有些则由其他属性驱动增减，而大部分属性处于两者的混合地
2. 角色属性也会以不同形式加成、补正到[武器](../跃入迷城 - GDD/故事/设定Wiki/科技/武器.md)和[义体](../跃入迷城 - GDD/故事/设定Wiki/科技/义体.md)，影响他们的伤害或其他效果
3. 所有角色属性都都由3个部分构成：基础数值；属性增长；固定附加；比例增长
- 对玩家角色来说，前2者在程序中预先配置，后2者通过技能、装备变化
- 对敌人角色来说，关卡等级的上升会提升比例增长的部分
- 后2者不在[角色列表](https://dikpa4hrtn9.feishu.cn/wiki/IxQNwRcWbipCLzkriwRc31LTnUg?from=from_copylink)中配置
4. 针对某些属性，其关联属性只会通过技能获取，则也不在[角色列表](https://dikpa4hrtn9.feishu.cn/wiki/IxQNwRcWbipCLzkriwRc31LTnUg?from=from_copylink)配置

**能力**

**肘击**

- ~~增加一个“V”键普攻的能力，作为近战或远程武器的补充攻击方式@Decay~~

体力消耗：10；基础状态下，体力价值 = 2

伤害：力量 x 2，基础状态下 = 20

韧性伤害：反应 x 1，基础状态下 = 10

**属性**

**生命值**

- 角色拥有**生命值 H**，为了描述方便，H代表生命值上限，而**Hc**代表**当前生命值**
- **生命值 H**由以下4部分构成：**H** = **Hb** + **Ha** + **Hf** + **Hr**
- **基础生命 Hb** = float，每个角色预先配置固定值。玩家角色 = 50
- **属性增长 Ha** = **Hb** x {[(**Strength** - 10) ^ A] x B}
- 其中A = 0.73；B = 0.07
- 这里对幂函数计算需要做一个 Strength < 10 = 10的保护
- **固定附加 Hf** = SUM (float)，一半来自于技能
- **比例增长 Hr** = SUM [ ( Hb + Hp + Hf ) x Ratio ) ]，技能、关卡等级等效果都会结算在这里
- 角色受到伤害时，会生成**虚血 Hv**。受到多少伤害，就会累加多少虚血。虚血的计算规则如下：@Decay

```<p>- 当角色受到伤害时，首先会判断是否已经存在虚血</p><p>- 如果**不存在**：开始倒数计时，计算时间为**虚血等待 Hvt**，默认为1s</p><p>- 当计时归0时，虚血开始减少，逐渐靠近真实的当前生命值，靠近速率为**虚血消失速率 Hvv** = ( **H** / 2 ) / s</p><p>- 如果**存在**：累加伤害值到虚血上，**不重置**虚血等待状态</p>|![...](../跃入迷城%20-%20Metrics/images/角色Metrics.001.png)``` :- |
- 角色的真实生命值归0就会死亡，不会等待虚血归0，但虚血驱动的生命条动画依旧会播放
- 虚血不随生命值变化而变化：
- 当生命值上限增加时，虚血Hv不变
- 当生命值当前值由于吸血以外的理由变化时，虚血Hv不变
- 截止到v0.0.5，没有设计这种情况

**护甲**

- 角色可以拥有护甲Am，护甲不存在上限值，由以下3部分组成：
- 护甲没有属性增长，其他配置规则和生命值相同
- 当角色拥有护甲时，会获得额外的伤害减免Amr，该效果是一个固定值减伤
- 当角色拥有护甲时，会获得+1级别的韧性等级 Pl

**耐力**

**能量**

**能量消耗与获取**

- 角色需要消耗能量**E**来使用主动技能，每个角色会预先配置能量上限，进入游戏时，能量当前值Ec = 0
- 角色消耗体力**S**时，会恢复能量 
- 每消耗N点体力，恢复(N x **Ecr**)%能量，其中**Ecr**是**能量转换率**，默认**Ecr = 100%**
- 能量会立刻开始恢复，但需要以一定速率恢复到目标值，默认**能量恢复率Err** = 25/s

**能量价值计算**

为了计算技能的能量消耗，我们需要先统一一些前提：

- 技能造成的伤害越高，能量消耗越高；伤害价值 = Sd
- 如果这个技能的伤害完全等价于一次普通攻击，它的能量消耗 = 等价的普通攻击的体力消耗；通常来说，技能的体力消耗应该小于能量消耗，但也不应该过小。
- 如同体力消耗，所有的基准以Level 1的武器设定
- 技能的冷却时间越长，能量消耗越低；冷却时间 = Cd
- 因为它稀释了DPS
- 技能的附加效果越多/越强，能量消耗越高；效果价值 = Ea
- 偏主观
- 技能的体力消耗越高，能量消耗越低；体力消耗 = Cs
- 原则上来说，大部分技能不应该消耗体力，从而降低玩家理解成本
- 但我们先保留该设计，以提供特殊技能的设计空间，下面的性价比计算公式不会引入Cs

在上述基础上，我们选定锚点技能——独头弹：消耗弹夹内所有子弹，发射一颗独头弹，造成(校正后伤害 x 子弹数量)伤害。Cd = 10s

- Sd = 100%；和直接攻击效果一样，只是一次性打完了
- Cd = 10s
- Ea = 1

**力量**

- 力量Strength会补正**生命值**，规则如：**Ha** = **Hb** x {[(**Strength** - 10) ^ A] x B}
- 其中A = 0.73；B = 0.07
- 在该比例下
- 10力量的初始单位：H = Hb
- 48力量的完全平均属性毕业单位：H ≈ 2 x Hb
- 108力量的极限力量毕业全力单位：H ≈** 3 x Hb
- 力量增长带来的生命值上限**H**增长不会增加生命值当前值**Hc**

**反应**

- 反应Reflex会补正**攻击速度**，规则如：**I1** = **I0** / [(1 + [（**Reflex** - 10) ^ A] x B)]
- 其中A = 1.89；B = 0.00025672
- I0是武器的配置攻击间隔，I1是实际攻击间隔
- 该效果在武器动画的所有段落均匀生效，且不作用于技能的释放时间

![...](../跃入迷城%20-%20Metrics/images/角色Metrics.002.png)

- 在该比例下
- 0反应的初始单位：I1 = I0
- 48反应的完全平均属性毕业单位：I1 ≈ 0.8 x I0
- 108反应的极限力量毕业全敏单位：I1 ≈ 0.4 x I0

**智力**

- 智力Intelligence会补正**异常积蓄**，规则如：**A1** = **A0** + **A0** x {[(**Intelligence** - 10) ^ A] x B}
- 其中A = 0.73；B = 0.07
- A0是武器配置的基础异常积蓄，A1是实际异常积蓄
- 该增益是否被技能继承，取决于技能本身是否继承武器异常积蓄
- 在该比例下
- 10智力的初始单位：A1 = A0
- 48智力的完全平均属性毕业单位：A1 ≈ 2 x A0
- 108智力的极限智力毕业全力单位：A1 ≈** 3 x A0

