# 战斗系统 (Combat System)

## 1. 普通攻击
*   **输入**: 鼠标 `左键` / Xbox手柄 `RT`

### 1.1 子弹生成机制
*   **射线检测 (Raycast)**:
    *   按下左键时，从指针位置发射射线检测目标。
    *   从反馈对象的胶囊体中心反向推算位置，与玩家子弹生成点连线，作为子弹弹道。
    *   **优势**: 障碍物只需如实设计体积，无需专门的遮挡碰撞体。
*   **生成高度**:
    *   所有子弹在 **90cm** 高度生成，确保能击中蹲伏玩家。
    *   **视觉处理**: 生成两套子弹，一套跟随枪口(无伤害，仅视觉)，一套跟随90cm高度(隐形，有伤害)。

### 1.2 攻击模式
*   **近战 (Melee)**:
    *   **站桩攻击**: 攻击时玩家无法移动或旋转 (参考《暗黑破坏神4》)。
    *   **动画**: 只影响上半身，保证左右连击衔接。
    *   **无连招**: 攻击动作时间均等，无复杂连招系统。
*   **远程 (Ranged)**:
    *   投射物速度参考《守望先锋》。
    *   v0.0.2: 暂时固定一个速度测试。

## 2. 伤害机制

### 2.1 伤害属性 (Damage Types)
游戏中所有伤害均附带属性，不同属性对**护甲**和**生命**有不同效果：

| 属性 | 护甲修正 | 生命修正 | 特性 |
| :--- | :--- | :--- | :--- |
| **动能 (Kinetic)** | 50% | 150% | 优先伤害护甲 |
| **电磁 (Electrical)** | 150% | 50% | 优先伤害护甲 |
| **热能 (Thermal)** | 100% | 100% | 优先伤害护甲 |
| **辐射 (Radioactive)** | 0% | 100% (体力) | **越过护甲**，直接扣除体力 |
| **神经 (Neural)** | 50% | 50% | 同时伤害护甲和体力 |
| **霜冻 (Frost)** | 75% | 75% | 优先护甲；造成生命伤害时，消耗受伤者体力 (伤害值的25%) |

*   **弹药匹配**: 造成电磁伤害的武器消耗电磁子弹。
*   **多弹头机制**: 霰弹枪等武器，面板显示总伤害，实际伤害由每个弹头均分。
    *   例: 80伤害、8弹头的霰弹枪 = 10伤害 x 8弹头。

### 2.2 武器面板
*   **属性补正**: 武器伤害 = 基础伤害 + 补正伤害。
