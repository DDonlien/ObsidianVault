
**玩法**

\1. **目标**

- 玩家在游戏中，旨在不断击杀敌人，获得

\2. **镜头**

2.1 **视角透视**

```<p>- **方案1 - v0.0.2 @Decay**</p><p>- 参考清零计划</p><p>- 以玩家为中心，镂空{300cm}半径、下45°的两条墙壁</p><p>- 玩家视野内的敌人，延时描边呈现</p><p>- 延时和描边效果参考下图的《上行战场》</p><p>- 玩家视野现在以锥形范围为准，如果战争迷雾修改，则单独设计角度</p><p>- 不镂空Type 1、2的遮挡物，镂空Type 3、4的</p><p>- 遮挡物Type详见{蹲伏}篇章：[玩法](https://dikpa4hrtn9.feishu.cn/wiki/W6WSwDwfriKFu2knYnFcLsYpn7g#KfMgdea0loVHYlxFOJncqB6fn5b)</p><p>- 镂空部分的透明度可调，并且在边缘会渐变过渡</p><p>- 问题1：</p><p>- 我们目前已经实现墙体透视，但遇到了如下问题</p><p>- 可以看到图1中，玩家从1面墙移动到另1面墙时，另一面墙需要等到完全和玩家重叠才会透视，导致透视显示不自然</p><p>![...](../跃入迷城%20-%20GDD/images/玩法.001.png)</p><p>- 这个问题的成因是：如下图所示的2个墙体侧面和人物角色的位置关系是一样的，因此程序无法判断提前透视图1，而不透视图2</p><p>![...](../跃入迷城%20-%20GDD/images/玩法.002.png)</p><p>- 但很显然，图1的墙壁侧面应该被隐藏，事实上，它应该一开始就处于“可被透视”状态（而非等到玩家和它完全重叠后才切换状态</p><p>- 如何判断这两类墙壁的差异，并实现连贯透视图1中墙壁的情况呢？</p><p>- 问题2：如上图可以看到，墙壁会在被透视的部份留下阴影，导致透视圈看似被切割了</p><p>- **方案2 -> 0.0.2不做**</p><p>- 房间全部做半高墙，进入后隐藏高半部分，参考暗黑破坏神</p><p>- **方案3 -> 0.0.2不做**</p><p>- 旋转镜头，参考VRising</p><p>- **参考：清零计划2**</p><p>- 在屏幕空间有一个透视功能，会穿透所有阻挡玩家可见性的障碍物</p><p>- 敌人则是描边呈现</p>```

|<p>![...](../跃入迷城%20-%20GDD/images/玩法.003.png)</p><p>图里其实有座山挡住了玩家，但被透视了，看下半部分的切边</p>|<p>![...](../跃入迷城%20-%20GDD/images/玩法.004.png)</p><p>如图左侧房子后的敌人</p>|
| :-: | :-: |

```<p></p><p>- **参考：上行战场**</p><p>- 如果被遮挡，并且在视野范围内，开始计时</p>```

|<p>![...](../跃入迷城%20-%20GDD/images/玩法.005.png)</p><p>刚被遮挡的玩家并不会被描边</p>|<p>![...](../跃入迷城%20-%20GDD/images/玩法.006.png)</p><p>一定时间后，玩家的描边透视出现</p>|
| :-: | :-: |

```<p></p><p>- 对两者都采用了延迟描边的做法</p>```

|<p>![...](../跃入迷城%20-%20GDD/images/玩法.007.png)</p><p>此时外墙后有2个敌人，但只有1个描了边</p><p>![...](../跃入迷城%20-%20GDD/images/玩法.007.png)</p><p>敌人移出遮挡时，会按镜头空间消除描边</p>|<p>![...](../跃入迷城%20-%20GDD/images/玩法.007.png)</p><p>0.x秒后，另一个敌人也描上边了</p>|
| :-: | :-: |

```<p></p><p>- 上行战场对建筑物同时使用了类似暗黑破坏神/VRising的做法，但我们应该用不上，只是参考墙壁黑边</p>```

|<p>![...](../跃入迷城%20-%20GDD/images/玩法.007.png)</p><p>玩家距离建筑远时，会显示屋顶</p>|<p>![...](../跃入迷城%20-%20GDD/images/玩法.007.png)</p><p>靠近时则会透视天花板，但这里墙壁还是做了黑边</p>|
| :-: | :-: |

```<p></p><p>- **v0.0.1 Issue：**</p><p>- 角色会被位于下45°的两条墙壁遮挡</p>```
2.2 **战争迷雾**

```<p>- **整体诉求**</p><p>- 玩家的在屏幕上会看到以主控角色为中心，朝向主控角色面前扇形展开的范围内的视野</p><p>- 锥形范围以外的空间，应当由2层战争迷雾遮挡</p><p>- 第一层为黑色，在完全未探索（玩家视野没有扫过）的区域覆盖</p><p>- 第二层为灰色，在玩家已探索过，但现在未在视野内的区域覆盖</p><p>- 基于以上设计，玩家屏幕内的空间应当被分为以下3个区域：</p><p>- 黑色迷雾区域</p><p>- 灰色迷雾区域</p><p>- 视野区域</p><p>- 灰色和黑色区域应该都是黑色遮罩+不透明度实现，灰色不透明度 = {50%}</p><p>- 灰色迷雾区域内，所有“character”不可见</p><p>- 灰色迷雾区域内，所有“actor”维持最后一次看到的状态（不刷新，war3）</p><p>- 视野区域的扇形，其锥顶应当以玩家主控角色为中心，扩展一个半径为Y的圆（周边视野）</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TSiXdxrPLoYD22xtLracy24Xn9e#STa6dIqK0sNGWybayDzcib27n5b></p>```


```<p>- **v0.0.2**</p><p>- 战争迷雾增加一个死区，玩家鼠标/角色在该定义角度/区域内移动时，战争迷雾不移动 -> done</p><p>- 应该类似于推箱子的效果，如果接触到死区边缘，从边缘开始平滑移动，而非自动置中</p><p>- 战争迷雾的显示和隐藏（亮层，灰色层的切换）应该有渐变过渡效果而非实时</p><p>- 也即，当一个新的grid从黑切换到灰、灰切换到亮，应该有个渐变效果 -> todo @Decay</p><p>- 该过度的**宽度**和**渐变时间**应该可调，考虑到使用适应性，以亮层向外平移一定距离即可，该距离应该可调 -> done</p><p>- 视野区域在FOV角度以外，应当有N距离，渐变到灰色迷雾区域</p><p>- 灰色迷雾到黑色迷雾区域的过度同理</p><p>- N可以=0，不应该导致BUG；两处过度（视野到灰色、灰色到黑色）应该可以分别设置N</p><p>- 如果遇到全新的空间（视野区域和黑色迷雾区域直接连接），则取2个N小的那个</p><p>![...](../跃入迷城%20-%20GDD/images/玩法.008.png)</p><p>如上图，红色为视野，黄色和红色之间的距离为渐变距离，小兵带来的视野请无视</p><p>- 实现代码 @Taobe</p><p>![...](../跃入迷城%20-%20GDD/images/玩法.009.png)</p>```
- **可能**
- 战争迷雾应该与场景mesh产生交互
- 见下图，当一个战争迷雾的边缘与地面突起特征产生交互，在dota里它会跟随对象变形
- 想象有一块布料铺在这个物体上，布盖到的地方是灰色层，没盖到的是亮层
- WIP @Taobe
- 相比DOTA2，我们的战争迷雾系统有几个显而易见的缺失：
- DOTA2（以及据我调研下来其他几个有迷雾系统的游戏）的战争迷雾并不是随一个圆均匀渲染的（我们现在是），而是将迷雾遮罩分成grid，每次玩家的视野圈和迷雾的grid重叠，才会显示那一段迷雾
- grid是菱形、还是六边形我没有很好的想法
- 这里可能有更复杂的逻辑，比如重叠超过70%才显示，退回超过30%才不再显示，以避免高频闪烁
- 对比详见下图

![...](../跃入迷城%20-%20GDD/images/玩法.010.png)

如图，右侧英雄相比左侧明显向下移动，但上部视野并没有变化

![...](../跃入迷城%20-%20GDD/images/玩法.011.png)

实现可能如图，红色菱形完全过了视野线所以转亮，中间黄色菱形还没有，所以还是被遮挡，grid布局可能要多尝试

\3. **角色**

3.1 **属性**

- 玩家角色在游戏中拥有这些属性：[角色列表](../跃入迷城 - 数据库/角色列表.md)
- 属性在2个维度上各分为2种类型
- 驱动性：主动属性、随动属性
- 主动属性：如玩家的6维、移动速度等，不随其他属性变动
- 随动属性：如玩家的生命、体力等，随其他属性变动
- 可见性：显性属性、隐藏属性

- 属性由3部分构成
- 基础数值：在程序中配死，游戏中不会变动，一般用作初始属性
- 动态增长：**隧动属性**随着**主动属性**增长/衰减而获得的增长/衰减
- 基础数值+动态增长构成了玩家的{基础属性}，也即常规游戏的“白值”
- 固定增长：通过固定附加值、比例附加值获得的增长
- 比例附加值只会作用于{基础属性}
- 该部分构成也即常规游戏的“绿值”

3.2 **装备**

\4. **敌人**

4.1 **属性**

- 敌人在游戏中拥有与玩家类似的属性：[角色列表](../跃入迷城 - 数据库/角色列表.md)
- 敌人属性的结构与玩家基本相同，主要差异来源于成长

4.2 **AI**

4.2.1 **响应事件**

```<p>- **听觉**</p><p>- 武器攻击、移动（跑步和走路）、开门会生成不同强度的“声音”</p><p>- ~~问题：在默认情况下，听觉事件是如何实现衰减的？@李少秋~~</p><p>- ~~BTW，我认为衰减次数少的那种比较合理~~</p><p>- AI拥有2个听觉相关系数：听觉范围HearingRange，超过该范围的“声音”无法触发听觉事件；</p><p>- AI接受听觉（声音）需要满足2个条件（与门）</p><p>- Loudness x HearingRange x DecayRatio >= Distance</p><p>- Loudness是发声源属性</p><p>- HearingRange是AI属性</p><p>- DecayRatio是阻挡物属性</p><p>- v0.0.2目前应该是系统属性，也即全局的mesh共享一个 = 0.5</p><p>- Distance如下图实时计算</p><p>- Loudness x SpreadRange x DecayRatio >= Distance</p><p>- SpreadRange是发声源属性</p><p>- 其他同上</p><p>- 针对武器之类的特殊对象，应该产生多次发声源，例如：</p><p>- 远程武器开枪时在玩家位置发声，子弹被销毁时在销毁位置发声</p><p>- 这里有个小问题：子弹的自然销毁不应该触发声音/听觉事件</p><p>- 近战武器挥舞时在玩家位置发声，SpreadRange一般为0</p><p>- 近战武器击中目标时在玩家位置发声，SpreadRange一般>0</p><p>- 这里有个小问题</p><p>- 玩家位置是最简单的</p><p>- ~~击中位置是最合理的，但可能有点难做~~</p><p>- ~~敌人的位置在面对大型敌人时，可能有巨大的位置偏差~~</p><p>- 声音衰减的计算情况如下，简单来说，下图3种情况都视作衰减1次，处理一次DecayRatio</p><p>![...](../跃入迷城%20-%20GDD/images/玩法.012.jpeg)</p><p>- **触摸**</p><p>- **~~方案1：~~**</p><p>- ~~玩家如果进入AI自身胶囊体半径{110%}的范围，会触发触摸响应~~</p><p>- ~~也即玩家的胶囊体和AI的几乎完全贴上，但并不是以接触为判定~~</p><p>- **方案2：**</p><p>- 玩家和AI自身胶囊体触碰，会触发触摸响应</p><p>- 也即玩家的胶囊体和AI的胶囊体碰撞作为判定</p><p>- 触发触摸响应后，被触发的AI会获得玩家位置</p><p>- **受伤**</p><p>- AI受伤时，如果不处于战斗loop（没有玩家坐标或玩家潜在坐标）会获得伤害来源方向</p><p>- AI应当尝试面向该方向，如果没有看到玩家，对该方向上的最近一个障碍物巡逻</p><p>- 如果伤害源是子弹，方向应该是子弹来源方向</p><p>- 如果伤害源是爆炸物，方向应该是爆炸物的爆炸源</p><p>![...](../跃入迷城%20-%20GDD/images/玩法.013.jpeg)</p><p>- **视觉**</p><p>- **团队**</p><p>- AI的团队协作由广播驱动，主要由两方面构成：触发机制和响应逻辑</p><p>- 触发机制：会导致AI发起广播的行为</p><p>- 目击玩家</p><p>- 响应逻辑：AI触发团队事件后的行为</p><p>- 无响应</p><p>- 团队广播：将玩家坐标广播给附近{600cm}范围内的队友，警戒</p><p>- 获得玩家坐标（非目击）</p><p>- 响应逻辑：AI触发团队事件后的行为</p><p>- 无响应</p><p>- 团队广播：将玩家坐标广播给附近{600cm}范围内的队友，警戒</p><p>- **推测**</p>```
4.2.2 **状态逻辑**

- **v0.0.2**
- 远程敌人会执行4类战斗操作
- 寻找掩体
- 瞄准玩家
- 攻击
- 使用技能/特殊武器
- 近战敌人会执行3类战斗操作
- 寻找掩体
- 瞄准玩家
- 攻击
- 使用技能/特殊武器

|![...](../跃入迷城%20-%20GDD/images/玩法.014.jpeg)|
| :-: |
- **~~v0.0.1~~**

![...](../跃入迷城%20-%20GDD/images/玩法.015.jpeg)

4.3 **敌人列表**

4.3.1 **劳旅**

```<p>***火箭锤*工程队长**</p><p>- 定位：小头目/精英怪</p><p>- 风格：近战、快速突进</p><p>- 伤害：普攻2/5；突进4/5</p><p>- 护甲：4/5</p><p>- 生命：2/5</p><p>- 灵巧：平时2/5；突进4/5</p><p>***使用刀具的持刀*项目技术员**</p><p>- 定位：近战高强度小怪</p><p>- 风格：近战、正常攻击</p><p>- 伤害：3/5</p><p>- 生命：3/5</p><p>- 灵巧：3/5</p><p>***手持动力扳手的*高级维修工**</p><p>- 定位：普通近战小怪</p><p>- 风格：远程、正常攻击</p><p>- 伤害：1.5/5</p><p>- 护甲：0/5</p><p>- 生命：2.5/5</p><p>- 灵巧：3/5</p><p>***手持钉枪的*职业枪钉工**</p><p>- 定位：普通远程小怪</p><p>- 风格：远程、正常攻击</p><p>- 伤害：1/5</p><p>- 护甲：0/5</p><p>- 生命：1/5</p><p>- 灵巧：2/5</p><p>- AI逻辑：[开发任务分配 > 画板](https://dikpa4hrtn9.feishu.cn/docx/TSiXdxrPLoYD22xtLracy24Xn9e?openbrd=1&doc_app_id=501&blockId=KP81dRp0GoIUmSxERKrcPX2Unxc&blockType=whiteboard&blockToken=Rdt9wDEtah8XX1blwP4cQeEXnQh#KP81dRp0GoIUmSxERKrcPX2Unxc)</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/Zj66dHxaRo6yzUxrViYcvas1nLc#XeLQdTi4mszqOYb4vVQc9AapnAk></p>```
\5. **道具**

5.1 **整体风格**

- 武器和义体本身以少而精为风格设计，由于有融合打印的存在，不用太担心build深度，而应该重点考虑尽可能不要出现无聊（近似）的套皮装备。
- 装备的阵营和系列应该有较强的属性风格化，来区分彼此的特色。

5.2 **武器**

5.2.1 **属性补正**

- 武器面板会显示属性补正
- 武器伤害 = 基础伤害 + 补正伤害

5.2.2 **伤害类型**

- 游戏中所有伤害附带伤害属性，存在以下几种**伤害属性**：
- v0.1.0
- 动能 (Kinetic)：对护甲造成50%伤害，对生命造成150%伤害，优先伤害护甲
- 电磁 (Electrical)：对护甲造成150%伤害，对生命造成50%伤害，优先伤害护甲
- 热能 (Thermal)：对护甲造成100%伤害，对生命造成100%伤害，优先伤害护甲
- vX.X.X
- 辐射 (Radioactive)：无法对护甲造成伤害，越过护甲直接对体力造成100%伤害
- 神经 (Neural)：对护甲和体力造成50%伤害，同时伤害两者
- 霜冻（Frost）：对护甲造成75%伤害，对生命造成75%伤害，优先伤害护甲；对生命造成伤害时，消耗受伤者体力，消耗量 = 伤害的25%
- 武器消耗的子弹和伤害类型对应，也即：造成电磁伤害的武器消耗电磁子弹
- 对于霰弹枪等一动多发的武器（调用1次GA，生成多个伤害体），每个子弹均分总伤害，武器面板还是正常显示总伤害，弹容量应该表达攻击次数
- 举例：伤害 = 80，伤害体 = 8的霰弹枪，每次攻击生成8个伤害体，每个伤害体造成10点伤害，每次攻击消耗1发子弹

5.2.3 **附加伤害**

5.3 **义体**

5.3.1 **命名规则**

- **UUID**
- **套装系列**
- 奥德赛
- 灵感来源于荷马的史诗奥德赛，关于奥德修斯在特洛伊战争后历经十年漂泊返回家园的故事。
- 装备关注持久性，尤其是对于生命和体力的提升。
- 水泊
- 灵感来源于水浒传水泊梁山。
- 装备关注“勇气”的概念，围绕玩家受到伤害后的临时提升效果设计。
- 少年心气（Teen Spirit）
- 灵感来源于Nirvana的Smells Like a Teen Spirit。
- 装备关注“败犬强化”概念，围绕对低状态（生命/体力，得选一下）下的补正效果设计。
- **v0.0.2**
- 套装系列名称可能出现在多个阵营，但考虑到前期设计的工作量，暂时先应该不会遇到重复情况
- 纪念碑：围绕希腊神话和史诗故事、事件构思套装名称，展现雕塑般的经典感。
- 野望：围绕摇滚乐经典（歌、专辑、乐手、乐队）构思套装名称，展示十足的反叛精神。
- 劳旅：围绕中国封建王朝历史（名称、名著、名人、事件）构思套装名称，展现中式古典质感。
- 新浦会：
- 玩家可以通过融合打印构建有自己风格的套装/装备，但我们设计时先按照就是这么一套来设计，融合后的效果等游戏里能试用了再看。

\6. **操控**

6.1 **移动**

- **输入**：键盘{W} {S}{A}{D}/ xbox手柄{左摇杆}

6.1.1 **移动速度**

- v0.0.2：玩家的移动速度 = 440cm/s，冲刺速度 = 748cm/s（1.7倍）
- 由于0.0.1的感受明显玩家过于灵活，显得建筑物很大，应当下调玩家的移动速度
- COD的冲刺速度大约770cm/s，这也差不多是现实世界100米跑世界纪录水平
- COD的冲刺速度大约是普通步行的1.75倍，倒算的步行速度约440cm/s
- 竞走的世界纪录差不多是435cm/s
- ~~v0.0.1：玩家的移动速度 = 600cm/s，冲刺速度 = 800cm/s~~

6.2 **冲刺**

- v0.0.2 - 屏蔽该功能

6.3 **普通攻击**

- **输入**：鼠标{左键} / xbox手柄{RT}

6.3.1 **子弹生成**

```<p>- 可能的方案@Decay</p><p>- 玩家按下鼠标左键时，应该先从指针位置cast一个ray，看能触发到哪个对象</p><p>- 从反馈对象的胶囊体中央反一个位置，和玩家的子弹生成位置连线</p><p>- 用连线vector作为子弹生成的vector</p><p>- 子弹散布在此基础之上发生</p><p>- 这样所有障碍物无需专门设计遮挡，只需如实设计体积即可</p><p>- v0.0.2方案 -> DONE</p><p>- 所有子弹都应该在90cm高的位置生成，所以可以正常击中蹲伏玩家</p><p>- 视觉上，这会导致子弹生成位置与武器错位</p><p>- 解决方案：生成2套子弹，一个跟随枪口生成niagra没有伤害，一个跟随90cm高度生成隐身但有伤害</p><p>- 该方案在v0.0.1验证似乎会影响手感，但没有和新的伤害机制结合尝试，v0.0.2再次尝试@Decay</p><p>- 该方案面对站立障碍物（多高度障碍物）会有些问题，也无法处理蹲伏玩家射击</p>```
6.3.2 **攻击机制**

- **近战**
- v0.0.2
- 采用暗黑4的方案，也即攻击时玩家无法移动
- https://www.youtube.com/watch?v=ARLdeuUjFy0
- 攻击动画只影响上半身动画，攻击动画简单，保证左右连击能衔接上即可
- 攻击动作每一下时间均等，没有连招

```<p>- 近战攻击：不能移动，不能旋转</p><p>- 近战出招：类似暗黑的攻击逻辑，没有连招系统</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/F4cJdlWhvoMrIJxWcFycLD1SnAc#R7Yzd4q1Vsk4xSbAC1gcfwOCnNb></p>```
- **远程**
- 比较简单
- 关于投射物速度，参考ow
- https://overwatch.fandom.com/wiki/Weapon
- 0.0.2，固定一个速度先试试
- **v0.0.2**

```<p>- **v0.0.1 Issue**</p><p>- 近战攻击现在体验比较差，主要来源于2个方面：</p><p>- 攻击同时可以移动，所以所有动作都显得非常飘</p><p>- 攻击的时间间隔明显不对，我们设计的间隔被均分到了攻击的所有步骤</p><p>- **v0.0.2 Action @Decay** </p><p>- 一次攻击（近战/远程）应该由以下4个时间part构成</p><p>- 前摇</p><p>- 造成伤害</p><p>- 后摇</p><p>- 间隔</p><p>- 近战攻击在{前摇 - 造成伤害 - 后摇}期间无法移动</p><p>- 关于相对合理的近战攻击频率，参考ow解包</p><p>- https://overwatch.fandom.com/wiki/Melee</p><p>- 远程攻击如果想要有手感，应该也要有以上4个步骤，只是可能体验起来不明显 @Decay@Cade</p><p>- 前摇：大部分都应该为0，但也许有特殊情况？</p><p>- 造成伤害：</p><p>- 变成生成子弹</p><p>- 大部份为即时，duration = 0</p><p>- 但这里也许会由于存在蓄力武器、激光武器、滋崩武器带来不同的问题</p><p>- 后摇：~~大部分都应该为0，但火箭筒这种可能会有很明显的后摇？~~</p><p>- 必须有后摇，因为其实用后摇而非间隔限制自动武器更为合理</p><p>- 间隔：大部份情况 = 0</p><p>- 间隔在我们的系统里，其实就是一个没有惩罚的后摇？</p><p>- 有个个问题：</p><p>- 照理说玩家无法在后摇里做任何其他动作，但间隔可以</p><p>- 与此同时，我又不希望玩家用半自动武器时，出现频繁的加速减速</p><p>- 但对于有超大间隔的武器（比如迫击炮）我又不希望在间隔期间全程减速</p><p>- 暂时的做法是先把大部份武器间隔设置为0，少数超慢速武器（狙击步枪、火箭筒）设置间隔。</p><p>- 远程攻击在{前摇 - 造成伤害 - 后摇}期间移动速度降低</p>```


```<p>1. Q：攻击时是否可以移动？</p><p>a. **v0.0.2**：尝试方案2，并以开关方式实现2、3切换来验证。现在行的手感很奇怪</p><p>b. **v0.0.1**：方案1</p><p>c. 方案1：可以，参考挺进地牢</p><p>d. 方案2：近战不行，远程可以，参考上行战场</p><p>e. 方案3：完全不行，参考哈迪斯、怪物猎人、黑魂</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/AAwhdTB3PorPqGxHHgYcKHM2nRe#Sj8od1f1css2yTbOevmcEg8zn4e></p>```


```<p>- 针对近战攻击动画（根动画）带来的位移，有2个解决思路，待确认</p><p>- 通过上下身动画混合，所有近战攻击动画只播放上半身，大部分第一人称射击游戏都这么做</p><p>- ~~通过根动画，让人物跟随动画移动，大部分第三人称ARPG都这么做~~</p>```
6.4 **交互**

6.5 **蹲伏**

- **输入**：键盘{C} / xbox手柄{B}
- 蹲伏的单位会有更小的视野（被障碍物遮挡，而非减少视野张角）

```<p>- 蹲伏的单位可以通过掩体规避一些远程攻击</p><p>- 玩家的身高（胶囊体）是180cm，蹲伏高度为90cm（{50%}）</p><p>- btw这里我在现实生活实测了一下，差不多，但真的蹲伏到90cm比较难走路</p><p>- 游戏中的掩体（阻拦子弹）有4种典型高度，分别为：</p><p>- Type1：<=85cm，阻拦移动，无法作为掩体</p><p>- Type2：90~145cm，阻拦移动，蹲伏掩体，无法作为站立掩体</p><p>- 150~180cm，不出现，以避免“怎么打不到头？？”的问题</p><p>- Type3：180~250cm，阻拦移动，站立掩体，顶部可视</p><p>- Type4：>300cm（或者其他墙壁高度），阻拦移动，站立掩体，和墙壁同高度，顶部黑色</p><p>- 该方案会有一个问题</p><p>- 所有>90cm的障碍物都会成为蹲伏+站立掩体，不符合直觉</p><p>- 更理想的方案：</p><p>- 子弹从枪口高度（但不是枪口，以避免平衡性问题）150cm生成</p><p>- 如果玩家蹲伏，子弹从70cm位置生成</p><p>- 当玩家尝试攻击没有掩体的蹲伏对象时，应该能正确击中</p><p>- How @Decay@Cade我现在提的方案详见[v0.0.2](https://dikpa4hrtn9.feishu.cn/wiki/SkO6wTCmSiq97YkIjLmcW8OCnJb#Ho6OdZ12toJijJxulTCcWCfdnch)</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/SFgNd2a5DoL3HTxAjzac7sS2ngd#JhvPdXGolsD9sKbbYHXcz7fnn3e></p>```
- 蹲伏的单位会有更慢{60%}的移动速度
- 该数值应该可配置 
- 60%参考的是COD
- 蹲伏的单位使用远程武器攻击时，子弹散布扩张速率减少{50%}

6.6 **翻滚**

- **输入**：键盘{空格} / xbox手柄{A}
- 翻滚时，玩家没有和player的碰撞体积，但和场景有

6.7 **使用武器技能**

- **输入**：鼠标{右键} / xbox手柄{RB}

6.8 **使用义体技能**

6.9 **切换义体技能**

\7. **机制**

7.1.1 **声音事件**

- 游戏中的声音事件分为音效事件和听觉事件
- 音效事件触发“音效”，或者简化为：播放音频
- 听觉事件触发“AI反应”，是一个信号广播
- 理论上来说，一个声音事件应该同时触发“声音事件”和“听觉事件”
- 但允许听觉事件广播范围为0，也允许音频为空

7.1.2 **v0.0.2**

\8. **循环**

\9. **关卡**

9.1 **构成**

9.1.1 **门**

```<p>- 游戏中有固定类型的门</p><p>- 针对不同Boss的层级，门有不同的视觉风格，但尺寸和功能不变，以确保玩家有熟悉的感觉</p><p>- 电梯门：</p><p>- 电梯厅连接</p><p>- 由于不同楼层可能有不同的装饰风格，因此电梯厅门可能各有不同</p><p>- 在场景搭建时，直接将门与电梯厅墙壁，配置到流送关卡而非常驻</p><p>- 电梯厅门：</p><p>- 奖励房间门：</p><p>- 普通房间门：</p><p>- 大型空间门：</p><p>- 普通门洞：</p>```
9.1.2 **电梯厅**

9.1.3 **奖励房间**

9.1.4 **一般空间**

9.1.5 **搭建流程**

```<p>- **~~v0.0.1 Issue~~**</p><p>- ~~因为用了现成素材，但没有概念图，对场景搭建局限性比较大~~</p><p>- ~~没有输入给@Arthur Li，也没有基于该内容出图给@Joyce Jiao~~</p><p>- ~~白模没有玩上/测试上，也没有验证~~</p><p>- **v0.0.2 Action**</p><p>- 优化关卡搭建流程</p><p>- 提前准备标准化尺寸的生产素材，建筑场景由标准化的模型尺寸构成@Taobe</p><p>- 房间高度下调到3米</p><p>- 2位策划先搭建白模，验证白模可行性@Taobe@Cade</p><p>- 用生产素材替换一部份白模内容@Taobe</p><p>- 场景美术基于用生产素材的白模出图@Arthur Li</p><p>- 地编基于出图替换、精修生产素材的白膜@Joyce Jiao</p><p>- Camera clipping实现3m以上的墙面顶部黑边@Decay</p><p>- 场景参考@Taobe</p><p>- 窗外的不夜城夜景日景 -> 通过天空盒 or 低模外围建筑实现？@Joyce Jiao</p><p>- 提高整体场景亮度@Joyce Jiao</p><p>- 我们是尝试构建夜晚的办公室，不是没电的办公室</p><p>- 但目前红灯模式下的亮度也许正好？</p><p>- 所有奖励房间应该有固定布局，并且在场景内确保房间内的物品永远在上面2条边@Taobe@Cade</p><p>- 策划先搭建白模，地编进行房间内场景优化</p><p>![...](../跃入迷城%20-%20GDD/images/玩法.016.jpeg)</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/ESeQdmbMKoVr9tx45Boczo41nqf#Ly1Edp5aps0N1ZbWQLQcpBTGnfc></p>```
9.2 **切换逻辑**

9.2.1 **电梯权限与关卡切换**

- 玩家在清空每一层的敌人后，会获得电梯卡，并解锁1部电梯
- ~~可以被解锁的电梯在MAP中预设~~
- 代办：可以被解锁的电梯在清空关卡前应该和其他电梯显示一样的视觉效果
- ~~电梯卡包含一个Access的Int~~
- ~~玩家和电梯交互后，弹出UI，选择要前往的楼层~~
- ~~玩家可以看到所有理论上可前往的楼层，去不了的选项灰掉~~
- ~~举例：如玩家在Lv6，拿到Access=3，则最多向下回到Lv4，向上到达Lv8~~
- 与楼层相关的电梯卡系统太复杂了，我解释都解释不清楚，废弃吧废弃吧
- 传统的roguelike游戏关卡结构如下（这里隐去了关卡的随机性）
- 玩家在关卡前可以选择去哪个奖励关卡
- 不论选择哪个，玩家“下一次”战斗的强度不变，到Boss的关卡数也不变

![...](../跃入迷城%20-%20GDD/images/玩法.017.jpeg)

- 我们的设计类似于这样（这里隐去了关卡的随机性）
- 玩家在电梯前可以选择向上或向下
- 向上则跳2层，不会超过Boss关
- 向下则跳1层
- 如果不能向下，向下灰置
- 敌人强度和关卡实际相关，所以玩家可以速刷也可以慢慢打
- 我们应该比其他roguelike有更多关卡

![...](../跃入迷城%20-%20GDD/images/玩法.018.jpeg)

9.2.2 **v0.0.2**

|![...](../跃入迷城%20-%20GDD/images/玩法.019.jpeg)|
| :-: |
9.2.3 **v0.0.1**

实际实现的流程如下：

|<p>![...](../跃入迷城%20-%20GDD/images/玩法.019.jpeg)</p><p><br>同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/NwGedcKMfoolsIxU45zcV321nDh#XiZhd1LZysfoazbdZYGcKdzjnsf></p>|
| :-: |

构成规则

操作

```**名称**|**所有者**|**修改时间**|**创建时间**``` :- | :- | :- |
|[归档](玩法/归档.md)|龚政涛|2024-12-16 20:59|2024-12-16 20:59|
|[Build Wiki](玩法/Build Wiki.md)|龚政涛|2024-12-16 21:03|2024-12-16 21:03|

\10. **奖励**

游戏中有2类奖励：成长性奖励、非成长性奖励

下列命名的逻辑如下：奖励对象 - 奖励生成的设备 - 奖励生成的房间

10.1 **成长性奖励**

10.1.1 **武器 - 武器打印机 - 武器打印室**

- **武器打印机**

```<p>- 玩家可以和打印机交互，打开打印菜单</p><p>- 每个打印机只能：</p><p>- **方案1**：购买1个装备，或者升级1个已有装备</p><p>- **方案2**：购买1个装备，或者进行1次融合打印</p><p>- 购买义体、融合打印、升级均消耗信用点</p><p>- **方案1**：刷新商店也消耗信用点</p><p>- **方案2**：刷新商店消耗特殊点数，通过{}方案获得补充</p><p>
同步自文档: <https://dikpa4hrtn9.feishu.cn/docx/TdkxdEEtjohnt6xRihVcvTCMnYd#KWOIdnxSbsMDmMbe8YiciL9Mnvg></p>```

10.1.2 **义体 - 融合打印机 - 义体打印室**

- **义体打印机**

```<p>- 玩家可以和打印机交互，打开打印菜单</p><p>- 每个打印机只能：</p><p>- **方案1**：购买1个装备，或者升级1个已有装备</p><p>- **方案2**：购买1个装备，或者进行1次融合打印</p><p>- 购买义体、融合打印、升级均消耗信用点</p><p>- **方案1**：刷新商店也消耗信用点</p><p>- **方案2**：刷新商店消耗特殊点数，通过{}方案获得补充</p>```
- 玩家可以装备8种（暂定）不同的义体，每种不重复
- 类似于常规RPG游戏的装备
- 8种分别对应以下位置，0.0.2只做前4种： 
1. 眼球
2. 皮肤
3. 手臂
4. 腿部
5. 骨骼
6. 心脏
7. 呼吸系统
8. 神经系统
- 装备义体消耗玩家的义体容量
- 类似于常规RPG游戏的负重
- 当义体容量被消耗超过50%、75%、100%，玩家会受到负面效果
- 负面效果TBD
- 义体容量在局外（公寓）进行升级
- **义体的参数**
- 详见[物品列表](../跃入迷城 - 数据库/物品列表.md)；其中主要的几个属性如下：
- 品质：决定其他属性；通过局内升级而提升
- 属性：为玩家提供基础属性；随品质提升而提升
- 义体技能槽：该武器能装备的武器技能上限取决于技能槽的数量；随品质提升而提升
- **义体附带技能**，且可以进行融合打印
- **v0.0.2**
- 义体只会提供被动技能
- **~~v0.0.1~~**
- ~~义体技能可能是主动或被动~~ 
- ~~被动技能持续生效~~
- ~~主动技能会添加到玩家的技能目录，玩家需要将主动技能配置到施法栏~~ 
- ~~玩家用Q/E释放技能，一次性只能调用1组技能栏（2个技能），用1、2、3、4等横排数字键切换技能组，技能组数量作为局外升级项目~~ 
- ~~手柄情况下，左右方向键切换技能组，上下切换武器；鼠标键盘情况下，滚轮切换武器~~
- ~~切换技能组后，技能会先CD；局外升级可以减少切换的第一次CD~~

10.2 **非成长奖励**

10.2.1 **生命值 - 治疗室**

10.2.2 **护甲值 - 维修间**

10.2.3 **子弹 - 弹药库**

10.2.4 **信用点 - 信用金库**

